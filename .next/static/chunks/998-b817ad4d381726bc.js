"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{94766:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},35685:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},92735:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},99897:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},97226:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},88906:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},85929:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},18930:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},21736:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(57437),n=r(2265),o=r(5526),s=r(96246),l=r(12381),i=r(53581),c=r(17689),d=r(32489);function u(e){let{currentAvatar:t,userId:r,name:u,onAvatarChange:f,size:p="md",className:m="",showUploadButton:h=!0,editable:g=!0}=e,[y,v]=(0,n.useState)(!1),[x,b]=(0,n.useState)(t||null),k=(0,n.useRef)(null),w=async e=>{if(!e.target.files||!e.target.files[0])return;let a=e.target.files[0];if(!a.type.startsWith("image/")){alert("Please select an image file");return}if(a.size>5242880){alert("Image size must be less than 5MB");return}try{v(!0);let e=new FileReader;e.onload=e=>{var t;let n=null===(t=e.target)||void 0===t?void 0:t.result;if(b(n),!r||"temp"===r||r.startsWith("temp-")){f(n),v(!1);return}j(a,n)},e.readAsDataURL(a)}catch(e){console.error("Error processing avatar:",e),alert("Failed to process image. Please try again."),b(t||null)}finally{v(!1)}},j=async(e,a)=>{if(!r||"temp"===r||r.startsWith("temp-")){a&&f(a);return}try{let{data:n,error:s}=await o.supabase.storage.getBucket("avatars");if(s||!n){console.log("Avatars bucket does not exist, using fallback"),a&&f(a);return}let l=e.name.split(".").pop(),i="".concat(r,"/").concat(Date.now(),".").concat(l);console.log("Uploading file:",i,"for user:",r);let{data:c,error:d}=await o.supabase.storage.from("avatars").upload(i,e,{cacheControl:"3600",upsert:!0});if(d){console.error("Upload error:",d),console.log("Falling back to data URL due to upload error:",d.message),a?f(a):(alert("Failed to upload image: ".concat(d.message)),b(t||null));return}let{data:{publicUrl:u}}=o.supabase.storage.from("avatars").getPublicUrl(i);console.log("Upload successful, public URL:",u),f(u)}catch(e){console.error("Error uploading avatar:",e),console.log("Falling back to data URL due to general error:",e.message),a?f(a):(alert("Failed to upload image. Using local preview instead."),b(t||null))}};return(0,a.jsxs)("div",{className:"flex flex-col items-center ".concat(m),children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(s.qE,{className:"".concat((()=>{switch(p){case"sm":return"h-8 w-8";case"md":default:return"h-12 w-12";case"lg":return"h-16 w-16";case"xl":return"h-24 w-24"}})()," border-4 border-white shadow-lg transition-all duration-300 group-hover:shadow-xl"),children:[(0,a.jsx)(s.F$,{src:x||void 0,alt:"".concat(u||"User","'s profile"),className:"object-cover"}),(0,a.jsx)(s.Q5,{className:"bg-gradient-to-br ".concat((()=>{let e=["from-blue-400 to-purple-600","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],t=(u&&"string"==typeof u?u:"User").split("").reduce((e,t)=>e+t.charCodeAt(0),0)%e.length;return e[t]})()," text-white font-semibold"),children:u&&"string"==typeof u&&""!==u.trim()?u.trim().split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"U"})]}),g&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer",onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},children:(0,a.jsx)(i.Z,{className:"h-6 w-6 text-white"})}),y&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),(0,a.jsx)("input",{ref:k,type:"file",accept:"image/*",onChange:w,className:"hidden",disabled:!g||y}),h&&g&&(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},disabled:y,className:"text-xs",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),x?"Change":"Upload"]}),x&&(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>{b(null),f(null),k.current&&(k.current.value="")},disabled:y,className:"text-xs text-red-600 hover:text-red-700",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),y&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}},12381:function(e,t,r){r.d(t,{z:function(){return c}});var a=r(57437),n=r(2265),o=r(85293),s=r(90535),l=r(93448);let i=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:c=!1,...d}=e,u=c?o.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:n,size:s,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){r.d(t,{Ol:function(){return l},Zb:function(){return s},aY:function(){return c},ll:function(){return i}});var a=r(57437),n=r(2265),o=r(93448);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});s.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})}).displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"}}]);