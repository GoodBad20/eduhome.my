"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4540],{9438:function(e,s,r){r.d(s,{Z:function(){return n}});var t=r(57437),a=r(2265),l=r(21736);function n(e){let{isOpen:s,onClose:n,parentId:i,onChildAdded:d}=e,[o,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:"",grade_level:"",date_of_birth:"",subjects:[]}),[x,h]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),[f,p]=(0,a.useState)(null),j=async e=>{if(e.preventDefault(),c(!0),h(null),u.password!==u.confirmPassword){h("Passwords do not match"),c(!1);return}if(u.password.length<6){h("Password must be at least 6 characters"),c(!1);return}try{let{supabase:e}=await Promise.resolve().then(r.bind(r,5526)),{data:s,error:t}=await e.auth.signUp({email:u.email,password:u.password,options:{data:{full_name:u.name,role:"student",avatar_url:b}}});if(t)throw Error("Authentication error: ".concat(t.message));if(!s.user)throw Error("Failed to create child account - no user data returned");p(s.user.id);let{data:a,error:l}=await e.from("users").insert([{id:s.user.id,email:u.email,full_name:u.name,role:"student",avatar_url:b}]).select().single();l&&console.error("Profile creation error:",l);let{data:o,error:c}=await e.from("students").insert([{user_id:s.user.id,parent_id:i,grade_level:u.grade_level,date_of_birth:u.date_of_birth,full_name:u.name,avatar_url:b}]).select().single();if(c)throw Error("Database error: ".concat(c.message));d(),n(),v()}catch(e){h(e instanceof Error?e.message:"Failed to add child. Please try again.")}finally{c(!1)}},v=()=>{m({name:"",email:"",password:"",confirmPassword:"",grade_level:"",date_of_birth:"",subjects:[]}),h(null),g(null),p(null)},y=e=>{let{name:s,value:r}=e.target;m(e=>({...e,[s]:r}))},N=e=>{m(s=>({...s,subjects:s.subjects.includes(e)?s.subjects.filter(s=>s!==e):[...s.subjects,e]}))};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-0 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden max-w-2xl w-full max-h-[95vh] overflow-y-auto my-4 md:my-auto",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 p-4 md:p-6 text-white",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h2",{className:"text-xl md:text-2xl font-bold flex items-center",children:[(0,t.jsx)("span",{className:"text-2xl md:text-3xl mr-2 md:mr-3",children:"\uD83D\uDC76"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Add Your Child"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Add Child"})]}),(0,t.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-xl md:text-2xl transition-colors p-1",children:"\xd7"})]}),(0,t.jsx)("p",{className:"text-xs md:text-sm opacity-90 mt-2",children:"Create a student account for your child to start their learning journey"})]}),(0,t.jsx)("div",{className:"p-4 md:p-6 lg:p-8",children:(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[x&&(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,t.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 md:p-6 border border-blue-100",children:[(0,t.jsxs)("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-3 md:mb-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-xl md:text-2xl mr-2",children:"\uD83D\uDC64"})," Child Information"]}),(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)(l.Z,{currentAvatar:b,userId:f||"temp-child",name:u.name||"Child",onAvatarChange:g,size:"xl",editable:!0})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child's Full Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:u.name,onChange:y,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"e.g., Sarah Johnson"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",name:"email",value:u.email,onChange:y,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"child@example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade Level"}),(0,t.jsxs)("select",{name:"grade_level",value:u.grade_level,onChange:y,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base text-black",children:[(0,t.jsx)("option",{value:"",children:"Select Grade"}),["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Form 1","Form 2","Form 3","Form 4","Form 5"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",name:"date_of_birth",value:u.date_of_birth,onChange:y,required:!0,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base text-black"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 md:p-6 border border-green-100",children:[(0,t.jsxs)("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-3 md:mb-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-xl md:text-2xl mr-2",children:"\uD83D\uDD10"})," Login Credentials"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:u.password,onChange:y,required:!0,minLength:6,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"Min. 6 characters"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:u.confirmPassword,onChange:y,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"Confirm password"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-2xl mr-2",children:"\uD83D\uDCDA"})," Subjects (Optional)"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select subjects your child needs help with:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Mathematics","Science","English","History","Physics","Chemistry","Biology","Art","Music"].map(e=>(0,t.jsxs)("label",{className:"flex items-center p-3 rounded-xl border-2 cursor-pointer transition-all transform hover:scale-105 ".concat(u.subjects.includes(e)?"border-purple-500 bg-gradient-to-r from-purple-100 to-pink-100 shadow-md":"border-gray-200 bg-white hover:border-purple-300 hover:shadow-sm"),children:[(0,t.jsx)("input",{type:"checkbox",checked:u.subjects.includes(e),onChange:()=>N(e),className:"mr-2 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"text-sm font-medium ".concat(u.subjects.includes(e)?"text-purple-700":"text-gray-700"),children:e})]},e))})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:o?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Adding Child..."]}):(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("span",{className:"mr-2",children:"\uD83D\uDC76"})," Add Child"]})})]})]})})]})}):null}},434:function(e,s,r){r.d(s,{Z:function(){return k}});var t=r(57437),a=r(2265),l=r(79820),n=r(69174),i=r(12381),d=r(7204),o=r(96246),c=r(32489),u=r(92369),m=r(17689),x=r(71769),h=r(31047),b=r(18930),g=r(83229),f=r(92308);function p(e){let{isOpen:s,onClose:r,child:l,onChildUpdated:n,onChildDeleted:i}=e,[d,o]=(0,a.useState)({name:"",grade_level:"",date_of_birth:"",avatar_url:null,bio:"",subjects:[]}),[p,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[C,k]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&s&&(o({name:l.name,grade_level:l.grade_level,date_of_birth:l.date_of_birth,avatar_url:l.avatar_url||null,bio:"",subjects:l.subjects||[]}),y(null))},[l,s]);let _=async e=>{if(e.preventDefault(),l){j(!0),y(null);try{await f.U.updateChild(l.id,d),n(),r()}catch(e){y(e instanceof Error?e.message:"Failed to update child information")}finally{j(!1)}}},D=async()=>{if(l&&window.confirm("Are you sure you want to delete ".concat(l.name,"'s account? This action cannot be undone."))){w(!0);try{await f.U.deleteChild(l.id),i(),r()}catch(e){y(e instanceof Error?e.message:"Failed to delete child account")}finally{w(!1)}}},S=async e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!r)return;let t=new FileReader;t.onloadend=()=>{o(e=>({...e,avatar_url:t.result}))},t.readAsDataURL(r)},F=()=>{C.trim()&&!d.subjects.includes(C.trim())&&(o(e=>({...e,subjects:[...e.subjects,C.trim()]})),k(""))},P=e=>{o(s=>({...s,subjects:s.subjects.filter(s=>s!==e)}))};return s&&l?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:r,children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,t.jsxs)("div",{className:"bg-blue-500 px-4 py-6 sm:px-6 sm:py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-2xl leading-6 font-bold text-white",children:"Edit Child Profile"}),(0,t.jsx)("button",{onClick:r,className:"text-white/80 hover:text-white transition-colors",children:(0,t.jsx)(c.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("p",{className:"text-blue-100",children:["Update ",l.name,"'s information"]})]}),(0,t.jsxs)("form",{onSubmit:_,className:"px-4 py-6 sm:p-6 sm:pb-8",children:[v&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:v})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 inline mr-1"}),"Profile Photo"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:d.avatar_url?(0,t.jsx)("img",{src:d.avatar_url,alt:"Avatar preview",className:"w-full h-full object-cover"}):(0,t.jsx)(u.Z,{className:"h-8 w-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"avatar-upload"}),(0,t.jsxs)("label",{htmlFor:"avatar-upload",className:"cursor-pointer bg-white border border-gray-300 rounded-md px-3 py-2 text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 inline-flex items-center",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Change Photo"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG or GIF. Max 5MB"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",id:"name",required:!0,value:d.name,onChange:e=>o(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 inline mr-1"}),"Grade Level"]}),(0,t.jsxs)("select",{id:"grade",required:!0,value:d.grade_level,onChange:e=>o(s=>({...s,grade_level:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select Grade Level"}),["Kindergarten","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Grade 7","Grade 8","Grade 9","Grade 10","Grade 11","Grade 12","Form 1","Form 2","Form 3","Form 4","Form 5","University Year 1","University Year 2","University Year 3","University Year 4"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"dob",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 inline mr-1"}),"Date of Birth"]}),(0,t.jsx)("input",{type:"date",id:"dob",required:!0,value:d.date_of_birth,onChange:e=>o(s=>({...s,date_of_birth:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),(0,t.jsx)("textarea",{id:"bio",rows:3,value:d.bio,onChange:e=>o(s=>({...s,bio:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell us about your child's interests and learning goals..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjects/Interests"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("input",{type:"text",value:C,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),F()),placeholder:"Add a subject...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Add"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.subjects.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>P(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},s))})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,t.jsxs)("button",{type:"button",onClick:D,disabled:N,className:"flex items-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),N?"Deleting...":"Delete Account"]}),(0,t.jsxs)("div",{className:"space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:p,className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Changes"]})]})]})]})]})]})}):null}var j=r(15868),v=r(91723),y=r(86595),N=r(33327),w=r(70525),C=r(88501);function k(e){var s,r;let{child:c,onScheduleLesson:u,onViewProgress:m,onMessageTutor:b,onManageSchedule:g,onChildUpdated:f,onChildDeleted:k}=e,[_,D]=(0,a.useState)(!1),[S,F]=(0,a.useState)(!1),[P,G]=(0,a.useState)({weeklyHours:0,completedLessons:0,averageGrade:0,streakDays:0,upcomingLessons:0,lastActive:""}),[U,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{E()},[c.id]);let E=async()=>{try{A(!0),await new Promise(e=>setTimeout(e,500)),G({weeklyHours:6,completedLessons:24,averageGrade:85,streakDays:5,upcomingLessons:3,lastActive:"2 hours ago"})}catch(e){console.error("Error loading child stats:",e)}finally{A(!1)}},Z=(e=>{let s=new Date(e),r=new Date,t=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return(a<0||0===a&&r.getDate()<s.getDate())&&t--,t})(c.date_of_birth);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Zb,{className:"p-4 hover:shadow-lg transition-all duration-300 border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,t.jsxs)(o.qE,{className:"h-10 w-10 flex-shrink-0",children:[(0,t.jsx)(o.F$,{src:c.avatar_url||void 0,alt:c.name}),(0,t.jsx)(o.Q5,{className:"bg-blue-500 text-white font-semibold text-sm",children:c.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:"text-base font-bold text-gray-900 truncate",children:c.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 truncate",children:[Z,"y • ",c.grade_level]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[c.progress,"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Progress"})]}),(0,t.jsx)("button",{onClick:()=>F(!0),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit child profile",children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)(d.E,{value:c.progress,className:"h-2",indicatorClassName:(r=c.progress)>=80?"bg-green-500":r>=60?"bg-yellow-500":"bg-red-500"})}),!U&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"bg-blue-50 rounded p-2 text-center",children:[(0,t.jsx)(v.Z,{className:"h-3 w-3 mx-auto mb-1 text-blue-700"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-blue-700",children:[P.weeklyHours,"h"]}),(0,t.jsx)("div",{className:"text-xs text-gray-700",children:"Week"})]}),(0,t.jsxs)("div",{className:"bg-green-50 rounded p-2 text-center",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3 mx-auto mb-1 text-green-700"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-green-700",children:P.completedLessons}),(0,t.jsx)("div",{className:"text-xs text-gray-700",children:"Lessons"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded p-2 text-center",children:[(0,t.jsx)(y.Z,{className:"h-3 w-3 mx-auto mb-1 text-purple-700"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-purple-700",children:[P.averageGrade,"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-700",children:"Grade"})]})]}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[null===(s=c.subjects)||void 0===s?void 0:s.slice(0,2).map((e,s)=>(0,t.jsx)(n.C,{variant:"secondary",className:"text-xs text-gray-700 bg-gray-100",children:e},s)),c.subjects&&c.subjects.length>2&&(0,t.jsxs)(n.C,{variant:"outline",className:"text-xs text-gray-700 border-gray-300",children:["+",c.subjects.length-2]})]})}),c.next_lesson&&(0,t.jsx)("div",{className:"bg-yellow-50 border-l-2 border-yellow-400 p-2 rounded mb-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3 text-yellow-700 mr-1 flex-shrink-0"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("div",{className:"text-xs font-medium text-gray-800 truncate",children:c.next_lesson})})]})}),P.streakDays>0&&(0,t.jsx)("div",{className:"bg-orange-50 border border-orange-200 p-2 rounded mb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.Z,{className:"h-3 w-3 text-orange-700 mr-1 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-xs text-gray-800",children:[P.streakDays," day streak"]})]}),(0,t.jsx)("span",{className:"text-sm",children:"\uD83D\uDD25"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,t.jsxs)(i.z,{onClick:()=>m(c.id),className:"bg-blue-500 hover:bg-blue-600 text-white text-xs",size:"sm",children:[(0,t.jsx)(w.Z,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,t.jsxs)(i.z,{onClick:()=>u(c.id),className:"bg-green-500 hover:bg-green-600 text-white text-xs",size:"sm",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Schedule"]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",className:"flex-1 text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>null==b?void 0:b(c.id),children:"Message"}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-xs text-gray-700 px-2 hover:bg-gray-100",onClick:()=>D(!_),children:_?"▲":"▼"})]}),_&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-gray-700",children:"Upcoming"}),(0,t.jsxs)(n.C,{variant:"outline",className:"text-xs border-gray-300 text-gray-700",children:[P.upcomingLessons," lessons"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-gray-700",children:"Last Active"}),(0,t.jsx)("span",{className:"text-gray-900",children:P.lastActive})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(i.z,{variant:"outline",className:"text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>window.location.href="/dashboard/parent/progress?child=".concat(c.id),children:"Progress"}),(0,t.jsxs)(i.z,{variant:"outline",className:"text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>null==g?void 0:g(c.id),children:[(0,t.jsx)(C.Z,{className:"h-3 w-3 mr-1"}),"Schedule"]})]})]})]}),(0,t.jsx)(p,{isOpen:S,onClose:()=>F(!1),child:c,onChildUpdated:()=>{null==f||f(),F(!1)},onChildDeleted:()=>{null==k||k(),F(!1)}})]})}},28185:function(e,s,r){r.d(s,{Z:function(){return n}});var t=r(57437),a=r(2265),l=r(92308);function n(e){let{isOpen:s,onClose:r,childId:n,childName:i,onLessonScheduled:d}=e,[o,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)({subject:"",tutor_id:"",scheduled_time:"",duration_minutes:60}),x=[{id:"1",name:"Ms. Chen",subjects:["Mathematics","Physics"]},{id:"2",name:"Dr. Smith",subjects:["Science","Chemistry"]},{id:"3",name:"Mr. Davis",subjects:["English","History"]},{id:"4",name:"Ms. Johnson",subjects:["Mathematics","Statistics"]}].filter(e=>e.subjects.includes(u.subject)),h=async e=>{e.preventDefault(),c(!0);try{await l.U.scheduleLesson({student_id:n,subject:u.subject,tutor_id:u.tutor_id,scheduled_time:u.scheduled_time,duration_minutes:u.duration_minutes}),d(),r(),m({subject:"",tutor_id:"",scheduled_time:"",duration_minutes:60})}catch(e){console.error("Error scheduling lesson:",e),alert("Failed to schedule lesson. Please try again.")}finally{c(!1)}},b=e=>{let{name:s,value:r}=e.target;m(e=>({...e,[s]:r}))};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["\uD83D\uDCC5 Schedule Lesson for ",i]}),(0,t.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject \uD83D\uDCDA"}),(0,t.jsxs)("select",{name:"subject",value:u.subject,onChange:b,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select a subject"}),["Mathematics","Science","English","History","Physics","Chemistry","Art","Music"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),u.subject&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Tutors \uD83D\uDC68‍\uD83C\uDFEB"}),(0,t.jsxs)("select",{name:"tutor_id",value:u.tutor_id,onChange:b,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select a tutor"}),x.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (specializes in ",e.subjects.join(", "),")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time \uD83D\uDD50"}),(0,t.jsx)("input",{type:"datetime-local",name:"scheduled_time",value:u.scheduled_time,onChange:b,required:!0,min:new Date().toISOString().slice(0,16),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration ⏱️"}),(0,t.jsxs)("select",{name:"duration_minutes",value:u.duration_minutes,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:30,children:"30 minutes"}),(0,t.jsx)("option",{value:45,children:"45 minutes"}),(0,t.jsx)("option",{value:60,children:"60 minutes"}),(0,t.jsx)("option",{value:90,children:"90 minutes"}),(0,t.jsx)("option",{value:120,children:"120 minutes"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Scheduling...":"Schedule Lesson \uD83D\uDE80"})]})]})]})}):null}},21736:function(e,s,r){r.d(s,{Z:function(){return u}});var t=r(57437),a=r(2265),l=r(5526),n=r(96246),i=r(12381),d=r(53581),o=r(17689),c=r(32489);function u(e){let{currentAvatar:s,userId:r,name:u,onAvatarChange:m,size:x="md",className:h="",showUploadButton:b=!0,editable:g=!0}=e,[f,p]=(0,a.useState)(!1),[j,v]=(0,a.useState)(s||null),y=(0,a.useRef)(null),N=async e=>{if(!e.target.files||!e.target.files[0])return;let t=e.target.files[0];if(!t.type.startsWith("image/")){alert("Please select an image file");return}if(t.size>5242880){alert("Image size must be less than 5MB");return}try{p(!0);let e=new FileReader;e.onload=e=>{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;if(v(a),!r||"temp"===r||r.startsWith("temp-")){m(a),p(!1);return}w(t,a)},e.readAsDataURL(t)}catch(e){console.error("Error processing avatar:",e),alert("Failed to process image. Please try again."),v(s||null)}finally{p(!1)}},w=async(e,t)=>{if(!r||"temp"===r||r.startsWith("temp-")){t&&m(t);return}try{let{data:a,error:n}=await l.supabase.storage.getBucket("avatars");if(n||!a){console.log("Avatars bucket does not exist, using fallback"),t&&m(t);return}let i=e.name.split(".").pop(),d="".concat(r,"/").concat(Date.now(),".").concat(i);console.log("Uploading file:",d,"for user:",r);let{data:o,error:c}=await l.supabase.storage.from("avatars").upload(d,e,{cacheControl:"3600",upsert:!0});if(c){console.error("Upload error:",c),console.log("Falling back to data URL due to upload error:",c.message),t?m(t):(alert("Failed to upload image: ".concat(c.message)),v(s||null));return}let{data:{publicUrl:u}}=l.supabase.storage.from("avatars").getPublicUrl(d);console.log("Upload successful, public URL:",u),m(u)}catch(e){console.error("Error uploading avatar:",e),console.log("Falling back to data URL due to general error:",e.message),t?m(t):(alert("Failed to upload image. Using local preview instead."),v(s||null))}};return(0,t.jsxs)("div",{className:"flex flex-col items-center ".concat(h),children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)(n.qE,{className:"".concat((()=>{switch(x){case"sm":return"h-8 w-8";case"md":default:return"h-12 w-12";case"lg":return"h-16 w-16";case"xl":return"h-24 w-24"}})()," border-4 border-white shadow-lg transition-all duration-300 group-hover:shadow-xl"),children:[(0,t.jsx)(n.F$,{src:j||void 0,alt:"".concat(u||"User","'s profile"),className:"object-cover"}),(0,t.jsx)(n.Q5,{className:"bg-gradient-to-br ".concat((()=>{let e=["from-blue-400 to-purple-600","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],s=(u&&"string"==typeof u?u:"User").split("").reduce((e,s)=>e+s.charCodeAt(0),0)%e.length;return e[s]})()," text-white font-semibold"),children:u&&"string"==typeof u&&""!==u.trim()?u.trim().split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"U"})]}),g&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},children:(0,t.jsx)(d.Z,{className:"h-6 w-6 text-white"})}),f&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),(0,t.jsx)("input",{ref:y,type:"file",accept:"image/*",onChange:N,className:"hidden",disabled:!g||f}),b&&g&&(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},disabled:f,className:"text-xs",children:[(0,t.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),j?"Change":"Upload"]}),j&&(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>{v(null),m(null),y.current&&(y.current.value="")},disabled:f,className:"text-xs text-red-600 hover:text-red-700",children:[(0,t.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),f&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}},69174:function(e,s,r){r.d(s,{C:function(){return i}});var t=r(57437);r(2265);var a=r(90535),l=r(93448);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:r}),s),...a})}},12381:function(e,s,r){r.d(s,{z:function(){return o}});var t=r(57437),a=r(2265),l=r(85293),n=r(90535),i=r(93448);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:r,variant:a,size:n,asChild:o=!1,...c}=e,u=o?l.g7:"button";return(0,t.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:r})),ref:s,...c})});o.displayName="Button"},79820:function(e,s,r){r.d(s,{Ol:function(){return i},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var t=r(57437),a=r(2265),l=r(93448);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},7204:function(e,s,r){r.d(s,{E:function(){return i}});var t=r(57437),a=r(2265),l=r(60610),n=r(93448);let i=a.forwardRef((e,s)=>{let{className:r,value:a,...i}=e;return(0,t.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...i,children:(0,t.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=l.fC.displayName}}]);