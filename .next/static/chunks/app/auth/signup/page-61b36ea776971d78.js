(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5271],{3129:function(e,a,r){Promise.resolve().then(r.bind(r,53669))},53669:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return u}});var t=r(57437),s=r(29),l=r.n(s),o=r(2265),n=r(99376),i=r(27648),c=r(5526),d=r(21736),m=r(94152),x=r(686);function u(){let{t:e}=(0,m.Z)(),{trackUserRegistration:a,trackFormStart:r,trackSuccessfulSubmission:s,trackAnalyticsError:u,trackUserInteraction:b}=(0,x.z)(),[p,f]=(0,o.useState)({email:"",password:"",confirmPassword:"",fullName:"",role:"parent",qualification:"",experienceYears:"",hourlyRate:"",relationship:""}),[h,g]=(0,o.useState)(!1),[j,y]=(0,o.useState)(null),[v,w]=(0,o.useState)(!1),[N,k]=(0,o.useState)(null),[z,C]=(0,o.useState)(null),F=(0,n.useRouter)(),R=e=>{f(a=>({...a,[e.target.name]:e.target.value}))},S=async e=>{if(e.preventDefault(),g(!0),y(null),w(!1),r("Signup Form"),p.password!==p.confirmPassword){y("Passwords do not match"),u("Passwords do not match","Signup Form"),g(!1);return}if(p.password.length<6){y("Password must be at least 6 characters"),u("Password too short","Signup Form"),g(!1);return}let t={full_name:p.fullName,role:p.role,avatar_url:N};"tutor"===p.role?(t.qualification=p.qualification,t.experience_years=p.experienceYears,t.hourly_rate=p.hourlyRate):"parent"===p.role&&(t.relationship=p.relationship);try{let{data:e,error:r}=await c.supabase.auth.signUp({email:p.email,password:p.password,options:{data:t,emailRedirectTo:"".concat(window.location.origin,"/auth/login")}});if(r)y(r.message),u(r,"Signup Form");else if(e.user){C(e.user.id),a("email"),s("Signup Form");let{error:r}=await c.supabase.from("users").insert({id:e.user.id,email:p.email,full_name:p.fullName,role:p.role,avatar_url:N});if(r&&(console.error("Profile creation error:",r),u(r,"Profile Creation")),"tutor"===p.role){let{error:a}=await c.supabase.from("tutor_profiles").insert({user_id:e.user.id,qualification:p.qualification,experience_years:parseInt(p.experienceYears)||0,hourly_rate:parseFloat(p.hourlyRate)||0,location:"Malaysia",avatar_url:N});a&&(console.error("Tutor profile creation error:",a),u(a,"Tutor Profile Creation"))}w(!0),setTimeout(()=>{F.push("/auth/login")},2e3)}}catch(e){y("An unexpected error occurred"),u(e,"Signup Form")}finally{g(!1)}};if(v)return(0,t.jsxs)("div",{className:"jsx-a670bf25ed39c2f0 min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"jsx-a670bf25ed39c2f0 absolute inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"jsx-a670bf25ed39c2f0 absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),(0,t.jsx)("div",{className:"jsx-a670bf25ed39c2f0 absolute -bottom-40 -left-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),(0,t.jsx)("div",{className:"jsx-a670bf25ed39c2f0 absolute top-40 left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),(0,t.jsxs)("div",{className:"jsx-a670bf25ed39c2f0 max-w-md w-full text-center relative z-10",children:[(0,t.jsx)("div",{className:"jsx-a670bf25ed39c2f0 w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-a670bf25ed39c2f0 w-8 h-8 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7",className:"jsx-a670bf25ed39c2f0"})})}),(0,t.jsx)("h1",{className:"jsx-a670bf25ed39c2f0 text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Account Created!"}),(0,t.jsx)("p",{className:"jsx-a670bf25ed39c2f0 text-slate-600 mb-4",children:"Your account has been successfully created. Redirecting to login page..."}),(0,t.jsx)("div",{className:"jsx-a670bf25ed39c2f0 animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mt-4"})]}),(0,t.jsx)(l(),{id:"a670bf25ed39c2f0",children:"@-webkit-keyframes blob{0%{-webkit-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-webkit-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-webkit-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-webkit-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@-moz-keyframes blob{0%{-moz-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-moz-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-moz-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-moz-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@-o-keyframes blob{0%{-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-o-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-o-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@keyframes blob{0%{-webkit-transform:translate(0px,0px)scale(1);-moz-transform:translate(0px,0px)scale(1);-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-webkit-transform:translate(30px,-50px)scale(1.1);-moz-transform:translate(30px,-50px)scale(1.1);-o-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-webkit-transform:translate(-20px,20px)scale(.9);-moz-transform:translate(-20px,20px)scale(.9);-o-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-webkit-transform:translate(0px,0px)scale(1);-moz-transform:translate(0px,0px)scale(1);-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}.animate-blob.jsx-a670bf25ed39c2f0{-webkit-animation:blob 7s infinite;-moz-animation:blob 7s infinite;-o-animation:blob 7s infinite;animation:blob 7s infinite}.animation-delay-2000.jsx-a670bf25ed39c2f0{-webkit-animation-delay:2s;-moz-animation-delay:2s;-o-animation-delay:2s;animation-delay:2s}.animation-delay-4000.jsx-a670bf25ed39c2f0{-webkit-animation-delay:4s;-moz-animation-delay:4s;-o-animation-delay:4s;animation-delay:4s}"})]});let I=async()=>{g(!0),y(null);try{let{error:e}=await c.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/dashboard?role=").concat(p.role)}});e?(y(e.message),u(e,"Google OAuth")):(r("Google OAuth Sign Up"),a("google"),s("Google OAuth Sign Up"))}catch(e){e instanceof Error&&e.message,y("An unexpected error occurred with Google sign-up"),u(e,"Google OAuth")}finally{g(!1)}};return(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 absolute inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 absolute -bottom-40 -left-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 absolute top-40 left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 max-w-2xl w-full relative z-10",children:[(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsxs)(i.default,{href:"/",className:"flex justify-center items-center space-x-2",children:[(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,t.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-6e24a6412bb4a785 w-7 h-7 text-white",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z",className:"jsx-6e24a6412bb4a785"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z",className:"jsx-6e24a6412bb4a785"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z",className:"jsx-6e24a6412bb4a785"})]})}),(0,t.jsx)("h1",{className:"jsx-6e24a6412bb4a785 text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"EduHome.my"})]}),(0,t.jsx)("h2",{className:"jsx-6e24a6412bb4a785 mt-6 text-center text-3xl font-extrabold text-gray-900",children:e("auth.signup")}),(0,t.jsxs)("p",{className:"jsx-6e24a6412bb4a785 mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,t.jsx)(i.default,{href:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 mt-8 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 p-8",children:[(0,t.jsxs)("button",{type:"button",onClick:I,disabled:h,className:"jsx-6e24a6412bb4a785 w-full flex items-center justify-center px-6 py-4 bg-white border-2 border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed mb-6 shadow-sm hover:shadow-md",children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:"jsx-6e24a6412bb4a785 w-5 h-5 mr-3",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",className:"jsx-6e24a6412bb4a785"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",className:"jsx-6e24a6412bb4a785"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",className:"jsx-6e24a6412bb4a785"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",className:"jsx-6e24a6412bb4a785"})]}),"Sign up with Google"]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 relative my-6",children:[(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"jsx-6e24a6412bb4a785 px-2 bg-white text-gray-500 font-medium",children:"Or sign up with email"})})]}),(0,t.jsxs)("form",{onSubmit:S,className:"jsx-6e24a6412bb4a785 space-y-6",children:[j&&(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 rounded-md bg-red-50 p-4",children:(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 text-sm text-red-800",children:j})}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 space-y-4",children:[(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 flex justify-center mb-6 text-gray-700",children:(0,t.jsx)(d.Z,{currentAvatar:N||void 0,userId:z||"temp",name:p.fullName||"User",onAvatarChange:e=>{k(e),b("profile_picture_upload","Signup Form")},size:"xl",editable:!0})}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"fullName",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:e("auth.fullName")}),(0,t.jsx)("input",{id:"fullName",name:"fullName",type:"text",required:!0,placeholder:e("auth.fullName"),value:p.fullName,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"email",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:e("auth.email")}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"john@example.com",value:p.email,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"role",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"I am a..."}),(0,t.jsxs)("select",{id:"role",name:"role",required:!0,value:p.role,onChange:e=>{R(e),b("role_selection_".concat(e.target.value),"Signup Form")},className:"jsx-6e24a6412bb4a785 mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-700",children:[(0,t.jsx)("option",{value:"parent",className:"jsx-6e24a6412bb4a785",children:"Parent"}),(0,t.jsx)("option",{value:"tutor",className:"jsx-6e24a6412bb4a785",children:"Tutor"})]})]}),"tutor"===p.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"qualification",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Highest Qualification"}),(0,t.jsx)("input",{id:"qualification",name:"qualification",type:"text",placeholder:"Bachelor's Degree in Education",value:p.qualification,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"experienceYears",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Years of Experience"}),(0,t.jsx)("input",{id:"experienceYears",name:"experienceYears",type:"number",min:"0",placeholder:"3",value:p.experienceYears,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"hourlyRate",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Hourly Rate (RM)"}),(0,t.jsx)("input",{id:"hourlyRate",name:"hourlyRate",type:"number",min:"0",step:"0.01",placeholder:"50.00",value:p.hourlyRate,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),"parent"===p.role&&(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"relationship",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Relationship to Student"}),(0,t.jsxs)("select",{id:"relationship",name:"relationship",value:p.relationship,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-700",children:[(0,t.jsx)("option",{value:"",className:"jsx-6e24a6412bb4a785",children:"Select Relationship"}),(0,t.jsx)("option",{value:"Father",className:"jsx-6e24a6412bb4a785",children:"Father"}),(0,t.jsx)("option",{value:"Mother",className:"jsx-6e24a6412bb4a785",children:"Mother"}),(0,t.jsx)("option",{value:"Guardian",className:"jsx-6e24a6412bb4a785",children:"Guardian"})]})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"password",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Min. 6 characters",value:p.password,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"jsx-6e24a6412bb4a785 block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,placeholder:"Confirm your password",value:p.confirmPassword,onChange:R,className:"jsx-6e24a6412bb4a785 mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),(0,t.jsxs)("div",{className:"jsx-6e24a6412bb4a785 flex items-center",children:[(0,t.jsx)("input",{id:"agree-terms",name:"agree-terms",type:"checkbox",required:!0,className:"jsx-6e24a6412bb4a785 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsxs)("label",{htmlFor:"agree-terms",className:"jsx-6e24a6412bb4a785 ml-2 block text-sm text-gray-700",children:["I agree to the"," ",(0,t.jsx)("a",{href:"/terms",className:"jsx-6e24a6412bb4a785 text-blue-600 hover:text-blue-500",children:"Terms and Conditions"})," ","and"," ",(0,t.jsx)("a",{href:"/privacy",className:"jsx-6e24a6412bb4a785 text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})]}),(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785",children:(0,t.jsx)("button",{type:"submit",disabled:h,className:"jsx-6e24a6412bb4a785 group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",children:h?(0,t.jsx)("div",{className:"jsx-6e24a6412bb4a785 animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Create Account"})})]})]})})]}),(0,t.jsx)(l(),{id:"6e24a6412bb4a785",children:"@-webkit-keyframes blob{0%{-webkit-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-webkit-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-webkit-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-webkit-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@-moz-keyframes blob{0%{-moz-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-moz-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-moz-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-moz-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@-o-keyframes blob{0%{-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-o-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-o-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}@keyframes blob{0%{-webkit-transform:translate(0px,0px)scale(1);-moz-transform:translate(0px,0px)scale(1);-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}33%{-webkit-transform:translate(30px,-50px)scale(1.1);-moz-transform:translate(30px,-50px)scale(1.1);-o-transform:translate(30px,-50px)scale(1.1);transform:translate(30px,-50px)scale(1.1)}66%{-webkit-transform:translate(-20px,20px)scale(.9);-moz-transform:translate(-20px,20px)scale(.9);-o-transform:translate(-20px,20px)scale(.9);transform:translate(-20px,20px)scale(.9)}100%{-webkit-transform:translate(0px,0px)scale(1);-moz-transform:translate(0px,0px)scale(1);-o-transform:translate(0px,0px)scale(1);transform:translate(0px,0px)scale(1)}}.animate-blob.jsx-6e24a6412bb4a785{-webkit-animation:blob 7s infinite;-moz-animation:blob 7s infinite;-o-animation:blob 7s infinite;animation:blob 7s infinite}.animation-delay-2000.jsx-6e24a6412bb4a785{-webkit-animation-delay:2s;-moz-animation-delay:2s;-o-animation-delay:2s;animation-delay:2s}.animation-delay-4000.jsx-6e24a6412bb4a785{-webkit-animation-delay:4s;-moz-animation-delay:4s;-o-animation-delay:4s;animation-delay:4s}"})]})}},21736:function(e,a,r){"use strict";r.d(a,{Z:function(){return m}});var t=r(57437),s=r(2265),l=r(5526),o=r(96246),n=r(12381),i=r(53581),c=r(17689),d=r(32489);function m(e){let{currentAvatar:a,userId:r,name:m,onAvatarChange:x,size:u="md",className:b="",showUploadButton:p=!0,editable:f=!0}=e,[h,g]=(0,s.useState)(!1),[j,y]=(0,s.useState)(a||null),v=(0,s.useRef)(null),w=async e=>{if(!e.target.files||!e.target.files[0])return;let t=e.target.files[0];if(!t.type.startsWith("image/")){alert("Please select an image file");return}if(t.size>5242880){alert("Image size must be less than 5MB");return}try{g(!0);let e=new FileReader;e.onload=e=>{var a;let s=null===(a=e.target)||void 0===a?void 0:a.result;if(y(s),!r||"temp"===r||r.startsWith("temp-")){x(s),g(!1);return}N(t,s)},e.readAsDataURL(t)}catch(e){console.error("Error processing avatar:",e),alert("Failed to process image. Please try again."),y(a||null)}finally{g(!1)}},N=async(e,t)=>{if(!r||"temp"===r||r.startsWith("temp-")){t&&x(t);return}try{let{data:s,error:o}=await l.supabase.storage.getBucket("avatars");if(o||!s){console.log("Avatars bucket does not exist, using fallback"),t&&x(t);return}let n=e.name.split(".").pop(),i="".concat(r,"/").concat(Date.now(),".").concat(n);console.log("Uploading file:",i,"for user:",r);let{data:c,error:d}=await l.supabase.storage.from("avatars").upload(i,e,{cacheControl:"3600",upsert:!0});if(d){console.error("Upload error:",d),console.log("Falling back to data URL due to upload error:",d.message),t?x(t):(alert("Failed to upload image: ".concat(d.message)),y(a||null));return}let{data:{publicUrl:m}}=l.supabase.storage.from("avatars").getPublicUrl(i);console.log("Upload successful, public URL:",m),x(m)}catch(e){console.error("Error uploading avatar:",e),console.log("Falling back to data URL due to general error:",e.message),t?x(t):(alert("Failed to upload image. Using local preview instead."),y(a||null))}};return(0,t.jsxs)("div",{className:"flex flex-col items-center ".concat(b),children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)(o.qE,{className:"".concat((()=>{switch(u){case"sm":return"h-8 w-8";case"md":default:return"h-12 w-12";case"lg":return"h-16 w-16";case"xl":return"h-24 w-24"}})()," border-4 border-white shadow-lg transition-all duration-300 group-hover:shadow-xl"),children:[(0,t.jsx)(o.F$,{src:j||void 0,alt:"".concat(m||"User","'s profile"),className:"object-cover"}),(0,t.jsx)(o.Q5,{className:"bg-gradient-to-br ".concat((()=>{let e=["from-blue-400 to-purple-600","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],a=(m&&"string"==typeof m?m:"User").split("").reduce((e,a)=>e+a.charCodeAt(0),0)%e.length;return e[a]})()," text-white font-semibold"),children:m&&"string"==typeof m&&""!==m.trim()?m.trim().split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"U"})]}),f&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},children:(0,t.jsx)(i.Z,{className:"h-6 w-6 text-white"})}),h&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),(0,t.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:w,className:"hidden",disabled:!f||h}),p&&f&&(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},disabled:h,className:"text-xs",children:[(0,t.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),j?"Change":"Upload"]}),j&&(0,t.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>{y(null),x(null),v.current&&(v.current.value="")},disabled:h,className:"text-xs text-red-600 hover:text-red-700",children:[(0,t.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),h&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}},96246:function(e,a,r){"use strict";r.d(a,{F$:function(){return i},Q5:function(){return c},qE:function(){return n}});var t=r(57437),s=r(2265),l=r(5523),o=r(93448);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.fC,{ref:a,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});n.displayName=l.fC.displayName;let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.Ee,{ref:a,className:(0,o.cn)("aspect-square h-full w-full",r),...s})});i.displayName=l.Ee.displayName;let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.NY,{ref:a,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});c.displayName=l.NY.displayName},12381:function(e,a,r){"use strict";r.d(a,{z:function(){return c}});var t=r(57437),s=r(2265),l=r(85293),o=r(90535),n=r(93448);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,a)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,m=c?l.g7:"button";return(0,t.jsx)(m,{className:(0,n.cn)(i({variant:s,size:o,className:r})),ref:a,...d})});c.displayName="Button"},5526:function(e,a,r){"use strict";r.d(a,{supabase:function(){return n}});var t=r(71545),s=r(40257);let l="https://upaocsnwqbncntpvlqdy.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwYW9jc253cWJuY250cHZscWR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MzE1MzAsImV4cCI6MjA3ODUwNzUzMH0.5cKkhTWrSqmWkW2PAazyDH9TFKtjRztjmzvrlY6azuw";if(!l||!o)throw Error("Missing Supabase environment variables");let n=(0,t.eI)(l,o);(0,t.eI)(l,s.env.SUPABASE_SERVICE_ROLE_KEY||o,{auth:{autoRefreshToken:!1,persistSession:!1}})},93448:function(e,a,r){"use strict";r.d(a,{cn:function(){return l}});var t=r(61994),s=r(53335);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.m6)((0,t.W)(a))}}},function(e){e.O(0,[2972,1545,2380,9146,6076,4598,2971,2117,1744],function(){return e(e.s=3129)}),_N_E=e.O()}]);