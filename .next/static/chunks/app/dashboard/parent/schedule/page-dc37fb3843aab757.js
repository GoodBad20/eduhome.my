(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9704],{86955:function(e,t,s){Promise.resolve().then(s.bind(s,52940))},52940:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var i=s(57437),r=s(2265),n=s(23763),a=s(92451),l=s(10407),c=s(92735),d=s(17625),o=s(99397),m=s(71637),u=s(94766),x=s(91723),h=s(83774),p=s(92369),g=s(15868),y=s(18930),b=s(92308),f=s(32489),v=s(62720),j=s(48736),N=s(31047),w=s(83229);function _(e){let{isOpen:t,onClose:s,children:n,activityTypes:a,selectedChild:l,currentDate:c=new Date().toISOString().split("T")[0],onActivityCreated:d}=e,[o,g]=(0,r.useState)({child_id:l||"",title:"",description:"",activity_type_id:"",date:c,start_time:"09:00",end_time:"10:00",location:"",priority:"medium",is_recurring:!1,recurrence_pattern:{type:"weekly",interval:1,days_of_week:[],end_date:"",end_occurrences:0},reminders:[{id:"1",type:"notification",minutes_before:15,is_enabled:!0}],notes:""}),[y,_]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{t&&(g({child_id:l||"",title:"",description:"",activity_type_id:"",date:c,start_time:"09:00",end_time:"10:00",location:"",priority:"medium",is_recurring:!1,recurrence_pattern:{type:"weekly",interval:1,days_of_week:[],end_date:"",end_occurrences:0},reminders:[{id:"1",type:"notification",minutes_before:15,is_enabled:!0}],notes:""}),k(null))},[t,l,c]);let C=a.find(e=>e.id===o.activity_type_id);(0,r.useEffect)(()=>{if(C){let e=new Date("2000-01-01T".concat(o.start_time));e.setMinutes(e.getMinutes()+C.default_duration);let t=e.toTimeString().slice(0,5);g(e=>({...e,end_time:t}))}},[C]);let D=async e=>{if(e.preventDefault(),!o.child_id||!o.title||!o.activity_type_id){k("Please fill in all required fields");return}_(!0),k(null);try{var t;let e={child_id:o.child_id,child_name:(null===(t=n.find(e=>e.id===o.child_id))||void 0===t?void 0:t.name)||"",title:o.title,description:o.description,activity_type:C||a[0],start_time:o.start_time,end_time:o.end_time,date:o.date,is_recurring:o.is_recurring,recurrence_pattern:o.is_recurring?o.recurrence_pattern:void 0,location:o.location||void 0,is_completed:!1,priority:o.priority,color:null==C?void 0:C.color,reminders:o.reminders,notes:o.notes};o.is_recurring?await b.U.createRecurringActivity(e):await b.U.createScheduleActivity(e),d(),s()}catch(e){k(e instanceof Error?e.message:"Failed to create activity")}finally{_(!1)}},T=e=>{g(t=>({...t,recurrence_pattern:{...t.recurrence_pattern,days_of_week:t.recurrence_pattern.days_of_week.includes(e)?t.recurrence_pattern.days_of_week.filter(t=>t!==e):[...t.recurrence_pattern.days_of_week,e]}}))},Z=(e,t)=>{g(s=>({...s,reminders:s.reminders.map(s=>s.id===e?{...s,...t}:s)}))},E=e=>{g(t=>({...t,reminders:t.reminders.filter(t=>t.id!==e)}))};return t?(0,i.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[(0,i.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:s,children:(0,i.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,i.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-blue-500 px-4 py-6 sm:px-6 sm:py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl leading-6 font-bold text-white",children:"Create Activity"}),(0,i.jsx)("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:(0,i.jsx)(f.Z,{className:"h-6 w-6"})})]}),(0,i.jsx)("p",{className:"text-blue-100 mt-2",children:"Add a new activity to your schedule"})]}),(0,i.jsxs)("form",{onSubmit:D,className:"px-4 py-6 sm:p-6 sm:pb-8",children:[S&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsx)("p",{className:"text-red-700 text-sm",children:S})}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(p.Z,{className:"h-4 w-4 inline mr-1"}),"Child *"]}),(0,i.jsxs)("select",{required:!0,value:o.child_id,onChange:e=>g(t=>({...t,child_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Child"}),n.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(v.Z,{className:"h-4 w-4 inline mr-1"}),"Activity Type *"]}),(0,i.jsxs)("select",{required:!0,value:o.activity_type_id,onChange:e=>g(t=>({...t,activity_type_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Activity"}),a.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.icon," ",e.name," (",e.default_duration,"min)"]},e.id))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,i.jsx)("input",{type:"text",required:!0,value:o.title,onChange:e=>g(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter activity title"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(j.Z,{className:"h-4 w-4 inline mr-1"}),"Description"]}),(0,i.jsx)("textarea",{rows:2,value:o.description,onChange:e=>g(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter activity description (optional)"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(N.Z,{className:"h-4 w-4 inline mr-1"}),"Date *"]}),(0,i.jsx)("input",{type:"date",required:!0,value:o.date,onChange:e=>g(t=>({...t,date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(x.Z,{className:"h-4 w-4 inline mr-1"}),"Start Time *"]}),(0,i.jsx)("input",{type:"time",required:!0,value:o.start_time,onChange:e=>g(t=>({...t,start_time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(x.Z,{className:"h-4 w-4 inline mr-1"}),"End Time *"]}),(0,i.jsx)("input",{type:"time",required:!0,value:o.end_time,onChange:e=>g(t=>({...t,end_time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(h.Z,{className:"h-4 w-4 inline mr-1"}),"Location"]}),(0,i.jsx)("input",{type:"text",value:o.location,onChange:e=>g(t=>({...t,location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter location (optional)"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,i.jsxs)("select",{value:o.priority,onChange:e=>g(t=>({...t,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"low",children:"Low"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"high",children:"High"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("input",{type:"checkbox",id:"is_recurring",checked:o.is_recurring,onChange:e=>g(t=>({...t,is_recurring:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsxs)("label",{htmlFor:"is_recurring",className:"ml-2 text-sm font-medium text-gray-700",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4 inline mr-1"}),"Recurring Activity"]})]}),o.is_recurring&&(0,i.jsxs)("div",{className:"ml-6 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeat"}),(0,i.jsxs)("select",{value:o.recurrence_pattern.type,onChange:e=>g(t=>({...t,recurrence_pattern:{...t.recurrence_pattern,type:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"daily",children:"Daily"}),(0,i.jsx)("option",{value:"weekly",children:"Weekly"}),(0,i.jsx)("option",{value:"monthly",children:"Monthly"}),(0,i.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Every"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"number",min:"1",value:o.recurrence_pattern.interval,onChange:e=>g(t=>({...t,recurrence_pattern:{...t.recurrence_pattern,interval:parseInt(e.target.value)||1}})),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"daily"===o.recurrence_pattern.type?"day(s)":"weekly"===o.recurrence_pattern.type?"week(s)":"monthly"===o.recurrence_pattern.type?"month(s)":"year(s)"})]})]})]}),"weekly"===o.recurrence_pattern.type&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days of Week"}),(0,i.jsx)("div",{className:"flex space-x-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,t)=>(0,i.jsx)("button",{type:"button",onClick:()=>T(t+1),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors ".concat(o.recurrence_pattern.days_of_week.includes(t+1)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e))})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[(0,i.jsx)(u.Z,{className:"h-4 w-4 inline mr-1"}),"Reminders"]}),(0,i.jsx)("button",{type:"button",onClick:()=>{g(e=>({...e,reminders:[...e.reminders,{id:Date.now().toString(),type:"notification",minutes_before:30,is_enabled:!0}]}))},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm",children:"+ Add Reminder"})]}),(0,i.jsx)("div",{className:"space-y-3",children:o.reminders.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.is_enabled,onChange:t=>Z(e.id,{is_enabled:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsxs)("select",{value:e.type,onChange:t=>Z(e.id,{type:t.target.value}),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"notification",children:"Notification"}),(0,i.jsx)("option",{value:"email",children:"Email"}),(0,i.jsx)("option",{value:"sms",children:"SMS"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"number",min:"0",value:e.minutes_before,onChange:t=>Z(e.id,{minutes_before:parseInt(t.target.value)||0}),className:"w-20 px-2 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"min before"})]}),o.reminders.length>1&&(0,i.jsx)("button",{type:"button",onClick:()=>E(e.id),className:"text-red-500 hover:text-red-700",children:(0,i.jsx)(f.Z,{className:"h-4 w-4"})})]},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,i.jsx)("textarea",{rows:3,value:o.notes,onChange:e=>g(t=>({...t,notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add any additional notes..."})]})]}),(0,i.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,i.jsxs)("button",{type:"submit",disabled:y,className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),y?"Creating...":"Create Activity"]})]})]})]})]})}):null}function S(e){var t,s;let{isOpen:n,onClose:a,activity:l,activityTypes:c,children:d,onActivityUpdated:o}=e,[g,_]=(0,r.useState)({child_id:"",title:"",description:"",activity_type_id:"",date:"",start_time:"",end_time:"",location:"",priority:"medium",is_recurring:!1,recurrence_pattern:{type:"weekly",interval:1,days_of_week:[],end_date:"",end_occurrences:0},reminders:[],notes:"",is_completed:!1}),[S,k]=(0,r.useState)(!1),[C,D]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(n&&l){var e;_({child_id:l.child_id,title:l.title,description:l.description||"",activity_type_id:(null===(e=l.activity_type)||void 0===e?void 0:e.id)||"",date:l.date,start_time:l.start_time,end_time:l.end_time,location:l.location||"",priority:l.priority,is_recurring:l.is_recurring,recurrence_pattern:l.recurrence_pattern||{type:"weekly",interval:1,days_of_week:[],end_date:"",end_occurrences:0},reminders:l.reminders.length>0?l.reminders:[{id:Date.now().toString(),type:"notification",minutes_before:15,is_enabled:!0}],notes:l.notes||"",is_completed:l.is_completed}),D(null)}},[n,l]);let T=c.find(e=>e.id===g.activity_type_id);(0,r.useEffect)(()=>{if(T){let e=new Date("2000-01-01T".concat(g.start_time));e.setMinutes(e.getMinutes()+T.default_duration);let t=e.toTimeString().slice(0,5);_(e=>({...e,end_time:t}))}},[T]);let Z=async e=>{if(e.preventDefault(),!l||!g.title||!g.activity_type_id){D("Please fill in all required fields");return}k(!0),D(null);try{var t;let e={child_id:g.child_id,child_name:(null===(t=d.find(e=>e.id===g.child_id))||void 0===t?void 0:t.name)||"",title:g.title,description:g.description,activity_type:T||l.activity_type,start_time:g.start_time,end_time:g.end_time,date:g.date,location:g.location||void 0,priority:g.priority,color:null==T?void 0:T.color,reminders:g.reminders,notes:g.notes,is_completed:g.is_completed};await b.U.updateScheduleActivity(l.id,e),o(),a()}catch(e){D(e instanceof Error?e.message:"Failed to update activity")}finally{k(!1)}},E=(e,t)=>{_(s=>({...s,reminders:s.reminders.map(s=>s.id===e?{...s,...t}:s)}))},A=e=>{_(t=>({...t,reminders:t.reminders.filter(t=>t.id!==e)}))},F=async()=>{if(l&&confirm("Are you sure you want to delete this activity? This action cannot be undone."))try{await b.U.deleteScheduleActivity(l.id),o(),a()}catch(e){D(e instanceof Error?e.message:"Failed to delete activity")}};return n&&l?(0,i.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[(0,i.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:a,children:(0,i.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,i.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-blue-500 px-4 py-6 sm:px-6 sm:py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl leading-6 font-bold text-white",children:"Edit Activity"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{onClick:F,className:"text-white/80 hover:text-white transition-colors p-1",title:"Delete activity",children:(0,i.jsx)(y.Z,{className:"h-5 w-5"})}),(0,i.jsx)("button",{onClick:a,className:"text-white/80 hover:text-white transition-colors",children:(0,i.jsx)(f.Z,{className:"h-6 w-6"})})]})]}),(0,i.jsx)("p",{className:"text-blue-100 mt-2",children:"Update activity details"})]}),(0,i.jsxs)("form",{onSubmit:Z,className:"px-4 py-6 sm:p-6 sm:pb-8",children:[C&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsx)("p",{className:"text-red-700 text-sm",children:C})}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(p.Z,{className:"h-4 w-4 inline mr-1"}),"Child *"]}),(0,i.jsxs)("select",{required:!0,value:g.child_id,onChange:e=>_(t=>({...t,child_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Child"}),d.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(v.Z,{className:"h-4 w-4 inline mr-1"}),"Activity Type *"]}),(0,i.jsxs)("select",{required:!0,value:g.activity_type_id,onChange:e=>_(t=>({...t,activity_type_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Activity"}),c.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.icon," ",e.name," (",e.default_duration,"min)"]},e.id))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,i.jsx)("input",{type:"text",required:!0,value:g.title,onChange:e=>_(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter activity title"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(j.Z,{className:"h-4 w-4 inline mr-1"}),"Description"]}),(0,i.jsx)("textarea",{rows:2,value:g.description,onChange:e=>_(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter activity description (optional)"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(N.Z,{className:"h-4 w-4 inline mr-1"}),"Date *"]}),(0,i.jsx)("input",{type:"date",required:!0,value:g.date,onChange:e=>_(t=>({...t,date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(x.Z,{className:"h-4 w-4 inline mr-1"}),"Start Time *"]}),(0,i.jsx)("input",{type:"time",required:!0,value:g.start_time,onChange:e=>_(t=>({...t,start_time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(x.Z,{className:"h-4 w-4 inline mr-1"}),"End Time *"]}),(0,i.jsx)("input",{type:"time",required:!0,value:g.end_time,onChange:e=>_(t=>({...t,end_time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,i.jsx)(h.Z,{className:"h-4 w-4 inline mr-1"}),"Location"]}),(0,i.jsx)("input",{type:"text",value:g.location,onChange:e=>_(t=>({...t,location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter location (optional)"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,i.jsxs)("select",{value:g.priority,onChange:e=>_(t=>({...t,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"low",children:"Low"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"high",children:"High"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"is_completed",checked:g.is_completed,onChange:e=>_(t=>({...t,is_completed:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"is_completed",className:"text-sm font-medium text-gray-700",children:"Mark as completed"})]})]})]}),l.is_recurring&&(0,i.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Recurring Activity"})]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["This activity repeats ",(null===(t=l.recurrence_pattern)||void 0===t?void 0:t.interval)||1," ",null===(s=l.recurrence_pattern)||void 0===s?void 0:s.type,"(s)"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[(0,i.jsx)(u.Z,{className:"h-4 w-4 inline mr-1"}),"Reminders"]}),(0,i.jsx)("button",{type:"button",onClick:()=>{_(e=>({...e,reminders:[...e.reminders,{id:Date.now().toString(),type:"notification",minutes_before:30,is_enabled:!0}]}))},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm",children:"+ Add Reminder"})]}),(0,i.jsx)("div",{className:"space-y-3",children:g.reminders.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.is_enabled,onChange:t=>E(e.id,{is_enabled:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsxs)("select",{value:e.type,onChange:t=>E(e.id,{type:t.target.value}),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"notification",children:"Notification"}),(0,i.jsx)("option",{value:"email",children:"Email"}),(0,i.jsx)("option",{value:"sms",children:"SMS"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"number",min:"0",value:e.minutes_before,onChange:t=>E(e.id,{minutes_before:parseInt(t.target.value)||0}),className:"w-20 px-2 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"min before"})]}),g.reminders.length>1&&(0,i.jsx)("button",{type:"button",onClick:()=>A(e.id),className:"text-red-500 hover:text-red-700",children:(0,i.jsx)(f.Z,{className:"h-4 w-4"})})]},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,i.jsx)("textarea",{rows:3,value:g.notes,onChange:e=>_(t=>({...t,notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add any additional notes..."})]})]}),(0,i.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,i.jsxs)("button",{type:"submit",disabled:S,className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),S?"Saving...":"Save Changes"]})]})]})]})]})}):null}var k=s(53375);s(24457);class C{async generateSchedulePDF(e){let{activities:t,child:s,dateRange:i,viewMode:r}=e;this.pdf.setFontSize(20),this.pdf.setFont("helvetica","bold");let n=s?"".concat(s.name,"'s Schedule"):"Family Schedule";this.pdf.text(n,20,20),this.pdf.setFontSize(12),this.pdf.setFont("helvetica","normal"),this.pdf.text("".concat(this.formatDate(i.start)," - ").concat(this.formatDate(i.end)),20,30);let a=45,l=this.groupActivitiesByDate(t);for(let e of Object.keys(l).sort()){let t=l[e];for(let s of(this.pdf.setFontSize(14),this.pdf.setFont("helvetica","bold"),this.pdf.text(this.formatDate(e),20,a),a+=8,t))a>270&&(this.pdf.addPage(),a=20),this.pdf.setFontSize(11),this.pdf.setFont("helvetica","normal"),this.pdf.text("".concat(s.start_time," - ").concat(s.end_time),25,a),this.pdf.setFont("helvetica","bold"),this.pdf.text(s.title,60,a),a+=5,this.pdf.setFont("helvetica","normal"),this.pdf.setFontSize(10),s.subject&&(this.pdf.text("Subject: ".concat(s.subject),60,a),a+=4),s.location&&(this.pdf.text("Location: ".concat(s.location),60,a),a+=4),s.description&&(this.pdf.text("Notes: ".concat(s.description),60,a),a+=4),a+=3;a+=5}this.pdf.setFontSize(8),this.pdf.setFont("helvetica","italic"),this.pdf.text("Generated on ".concat(new Date().toLocaleDateString()," by EduHome"),20,285);let c="".concat(n.replace(/\s+/g,"_"),"_").concat(i.start,"_").concat(i.end,".pdf");this.pdf.save(c)}groupActivitiesByDate(e){return e.reduce((e,t)=>{let s=t.date;return e[s]||(e[s]=[]),e[s].push(t),e[s].sort((e,t)=>e.start_time.localeCompare(t.start_time)),e},{})}formatDate(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}constructor(){this.pdf=new k.ZP("p","mm","a4")}}function D(e){let{children:t,selectedChildId:s}=e,[n,f]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(!0),[k,D]=(0,r.useState)(new Date),[T,Z]=(0,r.useState)("week"),[E,A]=(0,r.useState)("all"),[F,O]=(0,r.useState)(s||""),[P,I]=(0,r.useState)(!1),[M,U]=(0,r.useState)(!1),[L,q]=(0,r.useState)(null),[z,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{W()},[k,T,F,E]);let W=async()=>{try{w(!0),R(null);let[e,t]=await Promise.all([b.U.getActivityTypes(),B()]);j(e),f(t)}catch(e){R("Failed to load schedule data"),console.error("Error loading schedule data:",e)}finally{w(!1)}},B=async()=>{let e=H(),t=Y();return F?await b.U.getChildSchedule(F,e,t):[]},H=()=>{let e=new Date(k);switch(T){case"day":default:return e.toISOString().split("T")[0];case"week":let t=e.getDay(),s=e.getDate()-t+(0===t?-6:1);return e.setDate(s),e.toISOString().split("T")[0];case"month":return e.setDate(1),e.toISOString().split("T")[0]}},Y=()=>{let e=new Date(k);switch(T){case"day":default:return e.toISOString().split("T")[0];case"week":let t=e.getDay(),s=e.getDate()-t+(0===t?0:7);return e.setDate(s),e.toISOString().split("T")[0];case"month":return e.setMonth(e.getMonth()+1,0),e.toISOString().split("T")[0]}},G=n.filter(e=>{var t;return"all"===E||(null===(t=e.activity_type)||void 0===t?void 0:t.category)===E}),Q=e=>{q(e),U(!0)},$=async e=>{if(confirm("Are you sure you want to delete this activity?"))try{await b.U.deleteScheduleActivity(e),W()}catch(e){R("Failed to delete activity")}},J=async()=>{try{let e=new C,s=t.find(e=>e.id===F)||null,i={start:K(),end:V()};await e.generateSchedulePDF({activities:G,child:s,dateRange:i,viewMode:T})}catch(e){console.error("Error generating PDF:",e),alert("Failed to generate PDF. Please try again.")}},K=()=>{switch(T){case"day":default:return k.toISOString().split("T")[0];case"week":let e=new Date(k);return e.setDate(k.getDate()-k.getDay()),e.toISOString().split("T")[0];case"month":return new Date(k.getFullYear(),k.getMonth(),1).toISOString().split("T")[0]}},V=()=>{switch(T){case"day":default:return k.toISOString().split("T")[0];case"week":let e=new Date(k);return e.setDate(k.getDate()-k.getDay()+6),e.toISOString().split("T")[0];case"month":return new Date(k.getFullYear(),k.getMonth()+1,0).toISOString().split("T")[0]}},X=e=>{let t=new Date(k);switch(T){case"day":t.setDate(t.getDate()+("next"===e?1:-1));break;case"week":t.setDate(t.getDate()+("next"===e?7:-7));break;case"month":t.setMonth(t.getMonth()+("next"===e?1:-1))}D(t)},ee=()=>{let e=[];for(let t=6;t<=22;t++)e.push("".concat(t.toString().padStart(2,"0"),":00"));return e};return N?(0,i.jsx)("div",{className:"p-6",children:(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[z&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsx)("p",{className:"text-red-700 text-sm",children:z})}),(0,i.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("button",{onClick:()=>X("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,i.jsx)(a.Z,{className:"h-5 w-5"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:(()=>{switch(T){case"day":default:return k.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});case"week":let e=H(),t=Y();return"".concat(new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}));case"month":return k.toLocaleDateString("en-US",{month:"long",year:"numeric"})}})()}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[G.length," activity",1!==G.length?"ies":""]})]}),(0,i.jsx)("button",{onClick:()=>X("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,i.jsx)(l.Z,{className:"h-5 w-5"})})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[(0,i.jsxs)("select",{value:F,onChange:e=>O(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto text-sm",children:[(0,i.jsx)("option",{value:"",children:"All Children"}),t.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,i.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1 w-full sm:w-auto",children:["day","week","month"].map(e=>(0,i.jsx)("button",{onClick:()=>Z(e),className:"flex-1 px-3 py-1 rounded-md text-sm font-medium transition-colors touch-manipulation ".concat(T===e?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,i.jsxs)("select",{value:E,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto text-sm hidden md:block",children:[(0,i.jsx)("option",{value:"all",children:"All Categories"}),(0,i.jsx)("option",{value:"academic",children:"Academic"}),(0,i.jsx)("option",{value:"extracurricular",children:"Extracurricular"}),(0,i.jsx)("option",{value:"personal",children:"Personal"}),(0,i.jsx)("option",{value:"health",children:"Health"}),(0,i.jsx)("option",{value:"social",children:"Social"})]}),(0,i.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,i.jsxs)("button",{onClick:J,className:"flex items-center justify-center px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors touch-manipulation text-sm",title:"Export as PDF",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"PDF"}),(0,i.jsx)("span",{className:"sm:hidden",children:"PDF"})]}),(0,i.jsxs)("button",{onClick:()=>{try{!function(e){let t=document.getElementById(e);if(!t)throw Error("Element with id ".concat(e," not found"));let s=window.open("","_blank");if(!s)throw Error("Failed to open print window");let i=t.innerHTML;s.document.write("\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Schedule Print</title>\n        ".concat("\n    <style>\n      body {\n        font-family: Arial, sans-serif;\n        margin: 20px;\n        color: #000;\n        background: #fff;\n      }\n      .schedule-print {\n        max-width: 100%;\n        margin: 0 auto;\n      }\n      .schedule-header {\n        text-align: center;\n        margin-bottom: 20px;\n        border-bottom: 2px solid #106EBE;\n        padding-bottom: 10px;\n      }\n      .schedule-date {\n        font-weight: bold;\n        color: #106EBE;\n        margin: 15px 0 10px 0;\n        font-size: 16px;\n      }\n      .activity-item {\n        margin: 10px 0;\n        padding: 8px;\n        border-left: 4px solid #106EBE;\n        background: #f8f9fa;\n      }\n      .activity-time {\n        font-weight: bold;\n        color: #333;\n        margin-right: 10px;\n      }\n      .activity-title {\n        font-weight: bold;\n        margin-bottom: 3px;\n      }\n      .activity-details {\n        font-size: 12px;\n        color: #666;\n        margin-left: 80px;\n      }\n      .no-activities {\n        text-align: center;\n        color: #666;\n        font-style: italic;\n        margin: 20px 0;\n      }\n      @media print {\n        body { margin: 10px; }\n        .no-print { display: none !important; }\n      }\n    </style>\n  ",'\n      </head>\n      <body>\n        <div class="schedule-print">\n          ').concat(i,"\n        </div>\n        <script>\n          window.onload = function() {\n            window.print();\n            window.close();\n          }\n        </script>\n      </body>\n    </html>\n  ")),s.document.close()}("schedule-content")}catch(e){console.error("Error printing schedule:",e),alert("Failed to print schedule. Please try again.")}},className:"flex items-center justify-center px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors touch-manipulation text-sm",title:"Print Schedule",children:[(0,i.jsx)(d.Z,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Print"}),(0,i.jsx)("span",{className:"sm:hidden",children:"Print"})]}),(0,i.jsxs)("button",{onClick:()=>{I(!0)},className:"flex items-center justify-center px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors touch-manipulation text-sm flex-1",children:[(0,i.jsx)(o.Z,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Add Activity"}),(0,i.jsx)("span",{className:"sm:hidden",children:"Add"})]})]})]})]})}),(0,i.jsxs)("div",{id:"schedule-content",className:"mb-4",children:["day"===T&&(()=>{let e=ee(),t=G.filter(e=>e.date===k.toISOString().split("T")[0]);return(0,i.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,i.jsx)("div",{className:"max-h-[60vh] overflow-y-auto",children:e.map(e=>{let s=t.filter(t=>t.start_time<=e&&t.end_time>e);return(0,i.jsxs)("div",{className:"flex border-b border-gray-100 min-h-[80px]",children:[(0,i.jsx)("div",{className:"w-16 sm:w-20 py-3 px-2 sm:px-4 text-sm text-gray-500 font-medium border-r border-gray-100 flex-shrink-0",children:e}),(0,i.jsx)("div",{className:"flex-1 py-2 px-2 sm:px-4 min-h-[80px]",children:0===s.length?(0,i.jsx)("div",{className:"h-full flex items-center",children:(0,i.jsx)("button",{onClick:()=>{I(!0)},className:"text-gray-400 hover:text-gray-600 text-sm touch-manipulation p-2 rounded-lg hover:bg-gray-50",children:"+ Add activity"})}):(0,i.jsx)("div",{className:"space-y-2",children:s.map(e=>{var t,s,r;return(0,i.jsx)("div",{className:"p-2 sm:p-3 rounded-lg border-l-4 relative group cursor-pointer hover:shadow-md transition-shadow touch-manipulation",style:{backgroundColor:"".concat(null===(t=e.activity_type)||void 0===t?void 0:t.color,"20"),borderColor:null===(s=e.activity_type)||void 0===s?void 0:s.color},onClick:()=>Q(e),children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,i.jsx)("span",{className:"text-lg sm:text-base",children:null===(r=e.activity_type)||void 0===r?void 0:r.icon}),(0,i.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.title}),e.is_recurring&&(0,i.jsx)(m.Z,{className:"h-3 w-3 text-gray-500 flex-shrink-0"}),"high"===e.priority&&(0,i.jsx)(u.Z,{className:"h-3 w-3 text-red-500 flex-shrink-0"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-600",children:[(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),e.start_time," - ",e.end_time]}),e.location&&(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:e.location}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.location.slice(0,10),"..."]})]}),e.child_name&&(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:e.child_name}),(0,i.jsxs)("span",{className:"sm:hidden",children:[e.child_name.slice(0,8),"..."]})]})]}),e.description&&(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,i.jsxs)("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,i.jsx)("button",{onClick:()=>Q(e),className:"p-1 hover:bg-gray-200 rounded",children:(0,i.jsx)(g.Z,{className:"h-3 w-3"})}),(0,i.jsx)("button",{onClick:()=>$(e.id),className:"p-1 hover:bg-red-100 rounded text-red-500",children:(0,i.jsx)(y.Z,{className:"h-3 w-3"})})]})]})},e.id)})})})]},e)})})})})(),"week"===T&&(()=>{let e=[],t=new Date(H());for(let s=0;s<7;s++){let i=new Date(t);i.setDate(t.getDate()+s),e.push(i)}return(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,i.jsxs)("div",{className:"hidden lg:block",children:[(0,i.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[(0,i.jsx)("div",{className:"p-3 text-center text-sm font-medium text-gray-700",children:"Time"}),e.map((e,t)=>(0,i.jsxs)("div",{className:"p-3 text-center border-l border-gray-100",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,i.jsx)("div",{className:"text-xs ".concat(e.toDateString()===new Date().toDateString()?"text-blue-600 font-bold":"text-gray-600"),children:e.getDate()})]},t))]}),(0,i.jsx)("div",{className:"max-h-96 overflow-y-auto",children:ee().map(t=>(0,i.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[(0,i.jsx)("div",{className:"p-2 text-xs text-gray-500 font-medium border-r border-gray-100",children:t}),e.map((e,s)=>{let r=G.filter(s=>s.date===e.toISOString().split("T")[0]&&s.start_time<=t&&s.end_time>t);return(0,i.jsx)("div",{className:"p-1 border-l border-gray-50 min-h-[60px]",children:r.map(e=>{var t;return(0,i.jsxs)("div",{className:"p-1 mb-1 rounded text-xs cursor-pointer hover:opacity-80",style:{backgroundColor:null===(t=e.activity_type)||void 0===t?void 0:t.color,color:"white"},onClick:()=>Q(e),children:[(0,i.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,i.jsx)("div",{className:"opacity-90",children:e.start_time})]},e.id)})},s)})]},t))})]}),(0,i.jsx)("div",{className:"lg:hidden",children:(0,i.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>{let t=G.filter(t=>t.date===e.toISOString().split("T")[0]),s=e.toDateString()===new Date().toDateString();return(0,i.jsxs)("div",{className:"p-4 ".concat(s?"bg-blue-50":""),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 ".concat(s?"text-blue-600":""),children:e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),s&&(0,i.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Today"})]}),0===t.length?(0,i.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No activities scheduled"}):(0,i.jsx)("div",{className:"space-y-2",children:t.sort((e,t)=>e.start_time.localeCompare(t.start_time)).map(e=>{var t,s,r;return(0,i.jsx)("div",{className:"p-3 rounded-lg border cursor-pointer hover:shadow-md transition-shadow touch-manipulation",style:{borderLeftColor:(null===(t=e.activity_type)||void 0===t?void 0:t.color)||"#106EBE",borderLeftWidth:"4px",backgroundColor:"".concat(null===(s=e.activity_type)||void 0===s?void 0:s.color,"10")},onClick:()=>Q(e),children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,i.jsx)("span",{className:"text-lg",children:null===(r=e.activity_type)||void 0===r?void 0:r.icon}),(0,i.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.title})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),e.start_time," - ",e.end_time]}),e.location&&(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),e.location]})]}),e.description&&(0,i.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.description})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[e.is_recurring&&(0,i.jsx)(m.Z,{className:"h-3 w-3 text-gray-500"}),"high"===e.priority&&(0,i.jsx)(u.Z,{className:"h-3 w-3 text-red-500"})]})]})},e.id)})})]},e.toDateString())})})})]})})(),"month"===T&&(()=>{let e=k.getFullYear(),t=k.getMonth(),s=new Date(new Date(e,t,1));s.setDate(s.getDate()-(s.getDay()||7)+1);let r=[];for(let e=0;e<42;e++)r.push(new Date(s)),s.setDate(s.getDate()+1);return(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,i.jsx)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,i.jsx)("div",{className:"p-3 text-center text-sm font-medium text-gray-700",children:e},e))}),(0,i.jsx)("div",{className:"grid grid-cols-7",children:r.map((e,s)=>{let r=G.filter(t=>t.date===e.toISOString().split("T")[0]),n=e.getMonth()===t,a=e.toDateString()===new Date().toDateString();return(0,i.jsxs)("div",{className:"border border-gray-100 min-h-[100px] p-2 ".concat(n?"bg-white":"bg-gray-50"," ").concat(a?"ring-2 ring-blue-500":""),children:[(0,i.jsx)("div",{className:"text-sm font-medium mb-1 ".concat(n?a?"text-blue-600":"text-gray-900":"text-gray-400"),children:e.getDate()}),(0,i.jsxs)("div",{className:"space-y-1",children:[r.slice(0,3).map(e=>{var t;return(0,i.jsx)("div",{className:"p-1 rounded text-xs cursor-pointer hover:opacity-80 truncate",style:{backgroundColor:null===(t=e.activity_type)||void 0===t?void 0:t.color,color:"white"},onClick:()=>Q(e),children:e.title},e.id)}),r.length>3&&(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:["+",r.length-3," more"]})]})]},s)})})]})})()]}),(0,i.jsx)(_,{isOpen:P,onClose:()=>I(!1),children:t,activityTypes:v,selectedChild:F,currentDate:k.toISOString().split("T")[0],onActivityCreated:()=>{I(!1),W()}}),(0,i.jsx)(S,{isOpen:M,onClose:()=>U(!1),activity:L,activityTypes:v,children:t,onActivityUpdated:()=>{U(!1),q(null),W()}})]})}var T=s(70414),Z=s(70525),E=s(33327),A=s(95805);function F(){let{user:e}=(0,T.$)(),[t,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[o,m]=(0,r.useState)({totalActivities:0,thisWeek:0,upcomingLessons:0,completedToday:0});(0,r.useEffect)(()=>{e&&u()},[e]);let u=async()=>{try{l(!0);let[t,i]=await Promise.all([b.U.getChildren((null==e?void 0:e.id)||""),b.U.getScheduleStatistics((null==e?void 0:e.id)||"")]);s(t),m(i),t.length>0&&!c&&d(t[0].id)}catch(e){console.error("Error loading schedule data:",e)}finally{l(!1)}};return a?(0,i.jsx)(n.Z,{userRole:"parent",children:(0,i.jsx)("div",{className:"p-6",children:(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})}):(0,i.jsx)(n.Z,{userRole:"parent",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Schedule Management"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Manage daily activities, lessons, and timetables for your children"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,i.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 card-shadow",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Total Activities"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.totalActivities})]}),(0,i.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,i.jsx)(N.Z,{className:"h-6 w-6 text-blue-600"})})]})}),(0,i.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 card-shadow",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"This Week"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.thisWeek})]}),(0,i.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,i.jsx)(Z.Z,{className:"h-6 w-6 text-green-600"})})]})}),(0,i.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 card-shadow",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Upcoming Lessons"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.upcomingLessons})]}),(0,i.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,i.jsx)(E.Z,{className:"h-6 w-6 text-purple-600"})})]})}),(0,i.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 card-shadow",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Completed Today"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.completedToday})]}),(0,i.jsx)("div",{className:"bg-orange-100 p-3 rounded-lg",children:(0,i.jsx)(A.Z,{className:"h-6 w-6 text-orange-600"})})]})})]}),t.length>0&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)("button",{onClick:()=>d(""),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(c?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-500 text-white"),children:"All Children"}),t.map(e=>(0,i.jsx)("button",{onClick:()=>d(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(c===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.name},e.id))]})]}),(0,i.jsx)(D,{children:t,selectedChildId:c})]})})}}},function(e){e.O(0,[3125,2505,7337,2972,1545,2380,9146,6244,4598,3763,2308,2971,2117,1744],function(){return e(e.s=86955)}),_N_E=e.O()}]);