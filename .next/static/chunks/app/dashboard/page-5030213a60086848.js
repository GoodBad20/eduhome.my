(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{14364:function(e,t,u){Promise.resolve().then(u.bind(u,50441))},99376:function(e,t,u){"use strict";var n=u(35475);u.o(n,"useRouter")&&u.d(t,{useRouter:function(){return n.useRouter}})},50441:function(e,t,u){"use strict";u.r(t),u.d(t,{default:function(){return a}});var n=u(57437),r=u(70414),s=u(99376),i=u(2265);function a(){let{user:e,loading:t}=(0,r.$)(),u=(0,s.useRouter)();return((0,i.useEffect)(()=>{if(!t&&e){var n;switch((null===(n=e.user_metadata)||void 0===n?void 0:n.role)||"parent"){case"parent":default:u.push("/dashboard/parent");break;case"tutor":u.push("/dashboard/tutor");break;case"student":u.push("/dashboard/student")}}},[e,t,u]),t)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(u.push("/auth/login"),null)}},70414:function(e,t,u){"use strict";u.d(t,{$:function(){return o},SupabaseProvider:function(){return a}});var n=u(57437),r=u(2265),s=u(5526);let i=(0,r.createContext)(void 0);function a(e){let{children:t}=e,[u,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=!0,t=setTimeout(()=>{e&&c&&(console.warn("Auth initialization timeout - proceeding without session"),d(!1))},3e3);(async()=>{try{let{data:{session:n},error:r}=await s.supabase.auth.getSession();if(e){var u;r&&console.error("Error getting session:",r),l(n),a(null!==(u=null==n?void 0:n.user)&&void 0!==u?u:null),d(!1),clearTimeout(t)}}catch(u){console.error("Auth initialization error:",u),e&&(d(!1),clearTimeout(t))}})();let{data:{subscription:u}}=s.supabase.auth.onAuthStateChange((u,n)=>{if(e){var r,s;console.log("Auth state changed:",u,null==n?void 0:null===(r=n.user)||void 0===r?void 0:r.email),l(n),a(null!==(s=null==n?void 0:n.user)&&void 0!==s?s:null),d(!1),clearTimeout(t)}});return()=>{e=!1,u.unsubscribe(),clearTimeout(t)}},[]);let h=async()=>{await s.supabase.auth.signOut()};return(0,n.jsx)(i.Provider,{value:{user:u,session:o,loading:c,signOut:h},children:t})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useSupabase must be used within a SupabaseProvider");return e}},5526:function(e,t,u){"use strict";u.d(t,{supabase:function(){return a}});var n=u(71545),r=u(40257);let s="https://upaocsnwqbncntpvlqdy.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwYW9jc253cWJuY250cHZscWR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MzE1MzAsImV4cCI6MjA3ODUwNzUzMH0.5cKkhTWrSqmWkW2PAazyDH9TFKtjRztjmzvrlY6azuw";if(!s||!i)throw Error("Missing Supabase environment variables");let a=(0,n.eI)(s,i);(0,n.eI)(s,r.env.SUPABASE_SERVICE_ROLE_KEY||i,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[1545,2971,2117,1744],function(){return e(e.s=14364)}),_N_E=e.O()}]);