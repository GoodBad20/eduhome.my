(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1849],{11060:function(e,a,s){Promise.resolve().then(s.bind(s,33700))},33327:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},83774:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13041:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},33700:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var r=s(57437),t=s(2265),l=s(70414),n=s(23763),i=s(21736),o=s(79820),c=s(12381),d=s(92369),u=s(32489),m=s(33327),g=s(89345),x=s(13041),h=s(83774),b=s(71769),f=s(66337),p=s(87769),y=s(42208),j=s(54001),v=s(30401);function N(){var e,a,s,N,w;let{user:_}=(0,l.$)(),[k,C]=(0,t.useState)(!1),[Z,S]=(0,t.useState)(!1),[z,P]=(0,t.useState)(null),[A,E]=(0,t.useState)(!1),[M,L]=(0,t.useState)(""),[R,U]=(0,t.useState)(""),[F,q]=(0,t.useState)(""),[O,T]=(0,t.useState)(!1),[I,Y]=(0,t.useState)(!1),[D,K]=(0,t.useState)(!1),B={full_name:(null==_?void 0:null===(e=_.user_metadata)||void 0===e?void 0:e.full_name)||"John Doe",email:(null==_?void 0:_.email)||"john@example.com",phone:"+60 12-345 6789",location:"Kuala Lumpur, Malaysia",bio:"Passionate educator dedicated to helping students achieve their academic goals through personalized learning approaches.",timezone:"Asia/Kuala_Lumpur",subjects:["Mathematics","Physics","Chemistry"],languages:["English","Mandarin","Malay"],qualifications:"B.Sc. in Mathematics, University of Malaya",experience:"5 years of tutoring experience",hourly_rate:"80",teaching_levels:["SPM","IGCSE","A-Levels"],teaching_modes:["online","in_person"],online_meeting_link:"https://meet.google.com/xyz-abc-123",physical_address:"123 Education Street, Kuala Lumpur, 50200",google_maps_link:"https://maps.google.com/?q=123+Education+Street+Kuala+Lumpur",waze_link:"https://waze.com/ul?ll=3.1390,101.6869&navigate=yes",additional_notes:"Free parking available. Please arrive 10 minutes early.",availability:{monday:{morning:!0,afternoon:!0,evening:!1},tuesday:{morning:!1,afternoon:!0,evening:!0},wednesday:{morning:!0,afternoon:!0,evening:!1},thursday:{morning:!1,afternoon:!0,evening:!0},friday:{morning:!0,afternoon:!1,evening:!1},saturday:{morning:!0,afternoon:!0,evening:!0},sunday:{morning:!1,afternoon:!0,evening:!1}},email_notifications:!0,push_notifications:!0,sms_notifications:!1,lesson_reminders:!0,payment_alerts:!0,message_notifications:!0,student_requests:!0,marketing_emails:!1,profile_visibility:"public",show_contact_info:!0,data_sharing:!1,two_factor_auth:!1,account_status:"Active",member_since:"January 2024",verification_status:"Verified",average_rating:4.8,total_students:45,total_earnings:12800},[G,W]=(0,t.useState)(B);(0,t.useEffect)(()=>{var e;(null==_?void 0:null===(e=_.user_metadata)||void 0===e?void 0:e.avatar_url)&&P(_.user_metadata.avatar_url)},[_]);let V=async e=>{P(e);try{if(_){let{error:a}=await _.update({data:{avatar_url:e}});a&&console.error("Error updating avatar:",a)}}catch(e){console.error("Error updating avatar:",e)}},H=async e=>{e.preventDefault(),S(!0);try{await new Promise(e=>setTimeout(e,1e3)),C(!1)}catch(e){console.error("Error updating profile:",e)}finally{S(!1)}},J=e=>{W({...G,[e.target.name]:e.target.value})},Q=async e=>{if(e.preventDefault(),R!==F){alert("New passwords do not match");return}S(!0);try{await new Promise(e=>setTimeout(e,1e3)),E(!1),L(""),U(""),q(""),alert("Password changed successfully")}catch(e){console.error("Error changing password:",e),alert("Error changing password")}finally{S(!1)}},$=(e,a)=>{W(s=>({...s,[e]:a}))};return(0,r.jsx)(n.Z,{userRole:"tutor",children:(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:(0,r.jsxs)("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 md:p-6 rounded-xl mb-6 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,r.jsx)(d.Z,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl md:text-3xl font-bold",children:"Tutor Profile"}),(0,r.jsx)("p",{className:"text-xs md:text-sm text-white opacity-90 hidden md:block",children:"Manage your professional profile and account settings"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg md:text-2xl font-bold",children:["RM",G.hourly_rate]}),(0,r.jsx)("div",{className:"text-xs md:text-sm text-white opacity-90",children:"per hour"})]})]})}),(0,r.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Profile Information"]}),(0,r.jsx)(c.z,{type:"button",onClick:()=>C(!k),variant:k?"outline":"default",className:k?"border-gray-300":"bg-blue-600 hover:bg-blue-700",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})}),(0,r.jsx)(o.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(i.Z,{currentAvatarUrl:z,onAvatarChange:V,userType:"tutor",userId:(null==_?void 0:_.id)||"",size:"large"})}),(0,r.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:G.full_name}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),G.email]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),G.phone]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),G.location]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 px-3 py-2 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["RM",G.hourly_rate]}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"per hour"})]}),(0,r.jsxs)("div",{className:"bg-green-50 px-3 py-2 rounded-lg",children:[(0,r.jsx)("div",{className:"text-lg font-bold text-green-600",children:Array.isArray(G.subjects)?G.subjects.length:G.subjects.split(",").length}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"subjects"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 px-3 py-2 rounded-lg",children:[(0,r.jsx)("div",{className:"text-lg font-bold text-purple-600",children:"4.8â˜…"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"rating"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 px-3 py-2 rounded-lg",children:[(0,r.jsx)("div",{className:"text-lg font-bold text-yellow-600",children:G.total_students}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"students"})]})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Personal Information"]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,r.jsx)("input",{type:"text",name:"full_name",value:G.full_name,onChange:J,disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:G.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change email"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:G.phone,onChange:J,disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",name:"location",value:G.location,onChange:J,disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Teaching Information"]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjects"}),(0,r.jsx)("input",{type:"text",name:"subjects",value:Array.isArray(G.subjects)?G.subjects.join(", "):G.subjects,onChange:e=>$("subjects",e.target.value.split(",").map(e=>e.trim())),disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Languages Spoken"}),(0,r.jsx)("input",{type:"text",name:"languages",value:Array.isArray(G.languages)?G.languages.join(", "):G.languages,onChange:e=>$("languages",e.target.value.split(",").map(e=>e.trim())),disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hourly Rate (RM)"}),(0,r.jsx)("input",{type:"number",name:"hourly_rate",value:G.hourly_rate,onChange:J,disabled:!k,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualifications"}),(0,r.jsx)("textarea",{name:"qualifications",value:G.qualifications,onChange:J,disabled:!k,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]})]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Teaching Modes & Location"]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teaching Modes"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:(null===(a=G.teaching_modes)||void 0===a?void 0:a.includes("online"))||!1,onChange:e=>{let a=G.teaching_modes||[];e.target.checked?$("teaching_modes",[...a,"online"]):$("teaching_modes",a.filter(e=>"online"!==e))},disabled:!k,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Online Classes"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:(null===(s=G.teaching_modes)||void 0===s?void 0:s.includes("in_person"))||!1,onChange:e=>{let a=G.teaching_modes||[];e.target.checked?$("teaching_modes",[...a,"in_person"]):$("teaching_modes",a.filter(e=>"in_person"!==e))},disabled:!k,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"In-Person Classes"})]})]})]}),(null===(N=G.teaching_modes)||void 0===N?void 0:N.includes("online"))&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Meet Link"}),(0,r.jsx)("input",{type:"url",name:"online_meeting_link",value:G.online_meeting_link||"",onChange:J,disabled:!k,placeholder:"https://meet.google.com/xyz-abc-123",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This link will be used for all online classes. You can generate a permanent meeting link in Google Meet."})]}),(null===(w=G.teaching_modes)||void 0===w?void 0:w.includes("in_person"))&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Physical Address"}),(0,r.jsx)("textarea",{name:"physical_address",value:G.physical_address||"",onChange:J,disabled:!k,rows:2,placeholder:"123 Education Street, Kuala Lumpur 50200",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Maps Link"}),(0,r.jsx)("input",{type:"url",name:"google_maps_link",value:G.google_maps_link||"",onChange:J,disabled:!k,placeholder:"https://maps.google.com/?q=your+address",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waze Link"}),(0,r.jsx)("input",{type:"url",name:"waze_link",value:G.waze_link||"",onChange:J,disabled:!k,placeholder:"https://waze.com/ul?navigate=yes",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Class Information"}),(0,r.jsx)("textarea",{name:"additional_notes",value:G.additional_notes||"",onChange:J,disabled:!k,rows:3,placeholder:"Parking instructions, what to bring, arrival time, etc.",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"About Me"]})}),(0,r.jsx)(o.aY,{children:(0,r.jsx)("textarea",{name:"about",value:G.bio,onChange:J,disabled:!k,rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(k?"bg-white border-gray-300":"bg-gray-50 border-gray-200")})})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"Security"]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Last changed 3 months ago"})]}),(0,r.jsx)(c.z,{type:"button",onClick:()=>E(!A),variant:"outline",className:"border-blue-300 text-blue-600 hover:bg-blue-50",children:"Change Password"})]}),A&&(0,r.jsxs)("form",{onSubmit:Q,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:O?"text":"password",value:M,onChange:e=>L(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>T(!O),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:O?(0,r.jsx)(p.Z,{className:"h-4 w-4"}):(0,r.jsx)(y.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:I?"text":"password",value:R,onChange:e=>U(e.target.value),required:!0,minLength:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>Y(!I),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:I?(0,r.jsx)(p.Z,{className:"h-4 w-4"}):(0,r.jsx)(y.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:D?"text":"password",value:F,onChange:e=>q(e.target.value),required:!0,minLength:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>K(!D),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:D?(0,r.jsx)(p.Z,{className:"h-4 w-4"}):(0,r.jsx)(y.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(c.z,{type:"button",onClick:()=>E(!1),variant:"outline",children:"Cancel"}),(0,r.jsx)(c.z,{type:"submit",disabled:Z,className:"bg-blue-600 hover:bg-blue-700",children:Z?"Changing...":"Change Password"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),(0,r.jsx)(c.z,{type:"button",onClick:()=>$("two_factor_auth",!G.two_factor_auth),variant:G.two_factor_auth?"default":"outline",className:G.two_factor_auth?"bg-green-600 hover:bg-green-700":"border-gray-300 text-gray-700 hover:bg-gray-50",children:G.two_factor_auth?"Enabled":"Enable"})]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"Account Information"]})}),(0,r.jsx)(o.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Account Status"}),(0,r.jsxs)("p",{className:"font-semibold text-green-600 flex items-center mt-1",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),G.account_status]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Member Since"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900 mt-1",children:G.member_since})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Verification Status"}),(0,r.jsxs)("p",{className:"font-semibold text-green-600 flex items-center mt-1",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),G.verification_status]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),(0,r.jsxs)("p",{className:"font-semibold text-blue-900 mt-1",children:["RM",G.total_earnings.toLocaleString()]})]})]})})]}),k&&(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(c.z,{type:"button",onClick:()=>C(!1),variant:"outline",className:"px-6",children:"Cancel"}),(0,r.jsx)(c.z,{type:"submit",disabled:Z,className:"px-6 bg-blue-600 hover:bg-blue-700",children:Z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})})})}},21736:function(e,a,s){"use strict";s.d(a,{Z:function(){return u}});var r=s(57437),t=s(2265),l=s(5526),n=s(96246),i=s(12381),o=s(53581),c=s(17689),d=s(32489);function u(e){let{currentAvatar:a,userId:s,name:u,onAvatarChange:m,size:g="md",className:x="",showUploadButton:h=!0,editable:b=!0}=e,[f,p]=(0,t.useState)(!1),[y,j]=(0,t.useState)(a||null),v=(0,t.useRef)(null),N=async e=>{if(!e.target.files||!e.target.files[0])return;let r=e.target.files[0];if(!r.type.startsWith("image/")){alert("Please select an image file");return}if(r.size>5242880){alert("Image size must be less than 5MB");return}try{p(!0);let e=new FileReader;e.onload=e=>{var a;let t=null===(a=e.target)||void 0===a?void 0:a.result;if(j(t),!s||"temp"===s||s.startsWith("temp-")){m(t),p(!1);return}w(r,t)},e.readAsDataURL(r)}catch(e){console.error("Error processing avatar:",e),alert("Failed to process image. Please try again."),j(a||null)}finally{p(!1)}},w=async(e,r)=>{if(!s||"temp"===s||s.startsWith("temp-")){r&&m(r);return}try{let{data:t,error:n}=await l.supabase.storage.getBucket("avatars");if(n||!t){console.log("Avatars bucket does not exist, using fallback"),r&&m(r);return}let i=e.name.split(".").pop(),o="".concat(s,"/").concat(Date.now(),".").concat(i);console.log("Uploading file:",o,"for user:",s);let{data:c,error:d}=await l.supabase.storage.from("avatars").upload(o,e,{cacheControl:"3600",upsert:!0});if(d){console.error("Upload error:",d),console.log("Falling back to data URL due to upload error:",d.message),r?m(r):(alert("Failed to upload image: ".concat(d.message)),j(a||null));return}let{data:{publicUrl:u}}=l.supabase.storage.from("avatars").getPublicUrl(o);console.log("Upload successful, public URL:",u),m(u)}catch(e){console.error("Error uploading avatar:",e),console.log("Falling back to data URL due to general error:",e.message),r?m(r):(alert("Failed to upload image. Using local preview instead."),j(a||null))}};return(0,r.jsxs)("div",{className:"flex flex-col items-center ".concat(x),children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)(n.qE,{className:"".concat((()=>{switch(g){case"sm":return"h-8 w-8";case"md":default:return"h-12 w-12";case"lg":return"h-16 w-16";case"xl":return"h-24 w-24"}})()," border-4 border-white shadow-lg transition-all duration-300 group-hover:shadow-xl"),children:[(0,r.jsx)(n.F$,{src:y||void 0,alt:"".concat(u||"User","'s profile"),className:"object-cover"}),(0,r.jsx)(n.Q5,{className:"bg-gradient-to-br ".concat((()=>{let e=["from-blue-400 to-purple-600","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],a=(u&&"string"==typeof u?u:"User").split("").reduce((e,a)=>e+a.charCodeAt(0),0)%e.length;return e[a]})()," text-white font-semibold"),children:u&&"string"==typeof u&&""!==u.trim()?u.trim().split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"U"})]}),b&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},children:(0,r.jsx)(o.Z,{className:"h-6 w-6 text-white"})}),f&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),(0,r.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:N,className:"hidden",disabled:!b||f}),h&&b&&(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},disabled:f,className:"text-xs",children:[(0,r.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),y?"Change":"Upload"]}),y&&(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>{j(null),m(null),v.current&&(v.current.value="")},disabled:f,className:"text-xs text-red-600 hover:text-red-700",children:[(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),f&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}},12381:function(e,a,s){"use strict";s.d(a,{z:function(){return c}});var r=s(57437),t=s(2265),l=s(85293),n=s(90535),i=s(93448);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,a)=>{let{className:s,variant:t,size:n,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:t,size:n,className:s})),ref:a,...d})});c.displayName="Button"},79820:function(e,a,s){"use strict";s.d(a,{Ol:function(){return i},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var r=s(57437),t=s(2265),l=s(93448);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});n.displayName="Card";let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...t})});i.displayName="CardHeader";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...t})});o.displayName="CardTitle",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...t})}).displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s),...t})}).displayName="CardFooter"}},function(e){e.O(0,[2972,1545,2380,9146,3045,4598,3763,2971,2117,1744],function(){return e(e.s=11060)}),_N_E=e.O()}]);