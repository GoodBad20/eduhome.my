"use strict";exports.id=3324,exports.ids=[3324],exports.modules={8122:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},51896:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},31215:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},69508:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98091:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},63685:(e,s,t)=>{t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},98258:(e,s,t)=>{t.d(s,{Z:()=>i});var r=t(10326),a=t(17577),l=t(47208);function i({isOpen:e,onClose:s,parentId:i,onChildAdded:d}){let[n,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:"",grade_level:"",date_of_birth:"",subjects:[]}),[u,x]=(0,a.useState)(null),[h,b]=(0,a.useState)(null),[g,p]=(0,a.useState)(null),f=async e=>{if(e.preventDefault(),o(!0),x(null),c.password!==c.confirmPassword){x("Passwords do not match"),o(!1);return}if(c.password.length<6){x("Password must be at least 6 characters"),o(!1);return}try{let{supabase:e}=await Promise.resolve().then(t.bind(t,2777)),{data:r,error:a}=await e.auth.signUp({email:c.email,password:c.password,options:{data:{full_name:c.name,role:"student",avatar_url:h}}});if(a)throw Error(`Authentication error: ${a.message}`);if(!r.user)throw Error("Failed to create child account - no user data returned");p(r.user.id);let{data:l,error:n}=await e.from("users").insert([{id:r.user.id,email:c.email,full_name:c.name,role:"student",avatar_url:h}]).select().single();n&&console.error("Profile creation error:",n);let{data:o,error:m}=await e.from("students").insert([{user_id:r.user.id,parent_id:i,grade_level:c.grade_level,date_of_birth:c.date_of_birth,full_name:c.name,avatar_url:h}]).select().single();if(m)throw Error(`Database error: ${m.message}`);d(),s(),y()}catch(e){x(e instanceof Error?e.message:"Failed to add child. Please try again.")}finally{o(!1)}},y=()=>{m({name:"",email:"",password:"",confirmPassword:"",grade_level:"",date_of_birth:"",subjects:[]}),x(null),b(null),p(null)},j=e=>{let{name:s,value:t}=e.target;m(e=>({...e,[s]:t}))},v=e=>{m(s=>({...s,subjects:s.subjects.includes(e)?s.subjects.filter(s=>s!==e):[...s.subjects,e]}))};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-0 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden max-w-2xl w-full max-h-[95vh] overflow-y-auto my-4 md:my-auto",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 p-4 md:p-6 text-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-xl md:text-2xl font-bold flex items-center",children:[r.jsx("span",{className:"text-2xl md:text-3xl mr-2 md:mr-3",children:"\uD83D\uDC76"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Your Child"}),r.jsx("span",{className:"sm:hidden",children:"Add Child"})]}),r.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 text-xl md:text-2xl transition-colors p-1",children:"\xd7"})]}),r.jsx("p",{className:"text-xs md:text-sm opacity-90 mt-2",children:"Create a student account for your child to start their learning journey"})]}),r.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:(0,r.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[u&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("div",{className:"text-sm text-red-800",children:u})}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 md:p-6 border border-blue-100",children:[(0,r.jsxs)("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-3 md:mb-4 flex items-center",children:[r.jsx("span",{className:"text-xl md:text-2xl mr-2",children:"\uD83D\uDC64"})," Child Information"]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(l.Z,{currentAvatar:h,userId:g||"temp-child",name:c.name||"Child",onAvatarChange:b,size:"xl",editable:!0})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child's Full Name"}),r.jsx("input",{type:"text",name:"name",value:c.name,onChange:j,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"e.g., Sarah Johnson"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",name:"email",value:c.email,onChange:j,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"child@example.com"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade Level"}),(0,r.jsxs)("select",{name:"grade_level",value:c.grade_level,onChange:j,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base text-black",children:[r.jsx("option",{value:"",children:"Select Grade"}),["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Form 1","Form 2","Form 3","Form 4","Form 5"].map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),r.jsx("input",{type:"date",name:"date_of_birth",value:c.date_of_birth,onChange:j,required:!0,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base text-black"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 md:p-6 border border-green-100",children:[(0,r.jsxs)("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-3 md:mb-4 flex items-center",children:[r.jsx("span",{className:"text-xl md:text-2xl mr-2",children:"\uD83D\uDD10"})," Login Credentials"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:c.password,onChange:j,required:!0,minLength:6,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"Min. 6 characters"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsx("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:j,required:!0,className:"w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 text-sm md:text-base text-black",placeholder:"Confirm password"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx("span",{className:"text-2xl mr-2",children:"\uD83D\uDCDA"})," Subjects (Optional)"]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select subjects your child needs help with:"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Mathematics","Science","English","History","Physics","Chemistry","Biology","Art","Music"].map(e=>(0,r.jsxs)("label",{className:`flex items-center p-3 rounded-xl border-2 cursor-pointer transition-all transform hover:scale-105 ${c.subjects.includes(e)?"border-purple-500 bg-gradient-to-r from-purple-100 to-pink-100 shadow-md":"border-gray-200 bg-white hover:border-purple-300 hover:shadow-sm"}`,children:[r.jsx("input",{type:"checkbox",checked:c.subjects.includes(e),onChange:()=>v(e),className:"mr-2 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsx("span",{className:`text-sm font-medium ${c.subjects.includes(e)?"text-purple-700":"text-gray-700"}`,children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:n?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Adding Child..."]}):(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDC76"})," Add Child"]})})]})]})})]})}):null}},37056:(e,s,t)=>{t.d(s,{Z:()=>C});var r=t(10326),a=t(17577),l=t(29752),i=t(38443),d=t(91664),n=t(33269),o=t(3594),c=t(94019),m=t(79635),u=t(63685),x=t(6343),h=t(37358),b=t(98091),g=t(31215),p=t(47092);function f({isOpen:e,onClose:s,child:t,onChildUpdated:l,onChildDeleted:i}){let[d,n]=(0,a.useState)({name:"",grade_level:"",date_of_birth:"",avatar_url:null,bio:"",subjects:[]}),[o,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),C=async e=>{if(e.preventDefault(),t){f(!0),j(null);try{await p.U.updateChild(t.id,d),l(),s()}catch(e){j(e instanceof Error?e.message:"Failed to update child information")}finally{f(!1)}}},D=async()=>{if(t&&window.confirm(`Are you sure you want to delete ${t.name}'s account? This action cannot be undone.`)){N(!0);try{await p.U.deleteChild(t.id),i(),s()}catch(e){j(e instanceof Error?e.message:"Failed to delete child account")}finally{N(!1)}}},_=async e=>{let s=e.target.files?.[0];if(!s)return;let t=new FileReader;t.onloadend=()=>{n(e=>({...e,avatar_url:t.result}))},t.readAsDataURL(s)},S=()=>{w.trim()&&!d.subjects.includes(w.trim())&&(n(e=>({...e,subjects:[...e.subjects,w.trim()]})),k(""))},Z=e=>{n(s=>({...s,subjects:s.subjects.filter(s=>s!==e)}))};return e&&t?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:s,children:r.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,r.jsxs)("div",{className:"bg-blue-500 px-4 py-6 sm:px-6 sm:py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-2xl leading-6 font-bold text-white",children:"Edit Child Profile"}),r.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:r.jsx(c.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("p",{className:"text-blue-100",children:["Update ",t.name,"'s information"]})]}),(0,r.jsxs)("form",{onSubmit:C,className:"px-4 py-6 sm:p-6 sm:pb-8",children:[y&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm",children:y})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(m.Z,{className:"h-4 w-4 inline mr-1"}),"Profile Photo"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:d.avatar_url?r.jsx("img",{src:d.avatar_url,alt:"Avatar preview",className:"w-full h-full object-cover"}):r.jsx(m.Z,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{children:[r.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden",id:"avatar-upload"}),(0,r.jsxs)("label",{htmlFor:"avatar-upload",className:"cursor-pointer bg-white border border-gray-300 rounded-md px-3 py-2 text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 inline-flex items-center",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Change Photo"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG or GIF. Max 5MB"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",id:"name",required:!0,value:d.name,onChange:e=>n(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(x.Z,{className:"h-4 w-4 inline mr-1"}),"Grade Level"]}),(0,r.jsxs)("select",{id:"grade",required:!0,value:d.grade_level,onChange:e=>n(s=>({...s,grade_level:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select Grade Level"}),["Kindergarten","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Grade 7","Grade 8","Grade 9","Grade 10","Grade 11","Grade 12","Form 1","Form 2","Form 3","Form 4","Form 5","University Year 1","University Year 2","University Year 3","University Year 4"].map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"dob",className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(h.Z,{className:"h-4 w-4 inline mr-1"}),"Date of Birth"]}),r.jsx("input",{type:"date",id:"dob",required:!0,value:d.date_of_birth,onChange:e=>n(s=>({...s,date_of_birth:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),r.jsx("textarea",{id:"bio",rows:3,value:d.bio,onChange:e=>n(s=>({...s,bio:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell us about your child's interests and learning goals..."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjects/Interests"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:w,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),S()),placeholder:"Add a subject...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Add"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.subjects.map((e,s)=>(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,r.jsx("button",{type:"button",onClick:()=>Z(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},s))})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,r.jsxs)("button",{type:"button",onClick:D,disabled:v,className:"flex items-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),v?"Deleting...":"Delete Account"]}),(0,r.jsxs)("div",{className:"space-x-3",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:o,className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]})]})]})]})]})}):null}var y=t(69508),j=t(48998),v=t(33734),N=t(997),w=t(17069),k=t(8122);function C({child:e,onScheduleLesson:s,onViewProgress:t,onMessageTutor:c,onManageSchedule:m,onChildUpdated:u,onChildDeleted:b}){var g;let[p,C]=(0,a.useState)(!1),[D,_]=(0,a.useState)(!1),[S,Z]=(0,a.useState)({weeklyHours:0,completedLessons:0,averageGrade:0,streakDays:0,upcomingLessons:0,lastActive:""}),[M,F]=(0,a.useState)(!1),z=(e=>{let s=new Date(e),t=new Date,r=t.getFullYear()-s.getFullYear(),a=t.getMonth()-s.getMonth();return(a<0||0===a&&t.getDate()<s.getDate())&&r--,r})(e.date_of_birth);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Zb,{className:"p-4 hover:shadow-lg transition-all duration-300 border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,r.jsxs)(o.qE,{className:"h-10 w-10 flex-shrink-0",children:[r.jsx(o.F$,{src:e.avatar_url||void 0,alt:e.name}),r.jsx(o.Q5,{className:"bg-blue-500 text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"text-base font-bold text-gray-900 truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 truncate",children:[z,"y • ",e.grade_level]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[e.progress,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Progress"})]}),r.jsx("button",{onClick:()=>_(!0),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit child profile",children:r.jsx(y.Z,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"mb-3",children:r.jsx(n.E,{value:e.progress,className:"h-2",indicatorClassName:(g=e.progress)>=80?"bg-green-500":g>=60?"bg-yellow-500":"bg-red-500"})}),!M&&(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded p-2 text-center",children:[r.jsx(j.Z,{className:"h-3 w-3 mx-auto mb-1 text-blue-700"}),(0,r.jsxs)("div",{className:"text-sm font-semibold text-blue-700",children:[S.weeklyHours,"h"]}),r.jsx("div",{className:"text-xs text-gray-700",children:"Week"})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded p-2 text-center",children:[r.jsx(x.Z,{className:"h-3 w-3 mx-auto mb-1 text-green-700"}),r.jsx("div",{className:"text-sm font-semibold text-green-700",children:S.completedLessons}),r.jsx("div",{className:"text-xs text-gray-700",children:"Lessons"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded p-2 text-center",children:[r.jsx(v.Z,{className:"h-3 w-3 mx-auto mb-1 text-purple-700"}),(0,r.jsxs)("div",{className:"text-sm font-semibold text-purple-700",children:[S.averageGrade,"%"]}),r.jsx("div",{className:"text-xs text-gray-700",children:"Grade"})]})]}),r.jsx("div",{className:"mb-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.subjects?.slice(0,2).map((e,s)=>r.jsx(i.C,{variant:"secondary",className:"text-xs text-gray-700 bg-gray-100",children:e},s)),e.subjects&&e.subjects.length>2&&(0,r.jsxs)(i.C,{variant:"outline",className:"text-xs text-gray-700 border-gray-300",children:["+",e.subjects.length-2]})]})}),e.next_lesson&&r.jsx("div",{className:"bg-yellow-50 border-l-2 border-yellow-400 p-2 rounded mb-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-3 w-3 text-yellow-700 mr-1 flex-shrink-0"}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("div",{className:"text-xs font-medium text-gray-800 truncate",children:e.next_lesson})})]})}),S.streakDays>0&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 p-2 rounded mb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(N.Z,{className:"h-3 w-3 text-orange-700 mr-1 flex-shrink-0"}),(0,r.jsxs)("span",{className:"text-xs text-gray-800",children:[S.streakDays," day streak"]})]}),r.jsx("span",{className:"text-sm",children:"\uD83D\uDD25"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,r.jsxs)(d.z,{onClick:()=>t(e.id),className:"bg-blue-500 hover:bg-blue-600 text-white text-xs",size:"sm",children:[r.jsx(w.Z,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,r.jsxs)(d.z,{onClick:()=>s(e.id),className:"bg-green-500 hover:bg-green-600 text-white text-xs",size:"sm",children:[r.jsx(h.Z,{className:"h-3 w-3 mr-1"}),"Schedule"]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[r.jsx(d.z,{variant:"outline",size:"sm",className:"flex-1 text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>c?.(e.id),children:"Message"}),r.jsx(d.z,{variant:"ghost",size:"sm",className:"text-xs text-gray-700 px-2 hover:bg-gray-100",onClick:()=>C(!p),children:p?"▲":"▼"})]}),p&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-700",children:"Upcoming"}),(0,r.jsxs)(i.C,{variant:"outline",className:"text-xs border-gray-300 text-gray-700",children:[S.upcomingLessons," lessons"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-700",children:"Last Active"}),r.jsx("span",{className:"text-gray-900",children:S.lastActive})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(d.z,{variant:"outline",className:"text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>window.location.href=`/dashboard/parent/progress?child=${e.id}`,children:"Progress"}),(0,r.jsxs)(d.z,{variant:"outline",className:"text-xs text-gray-700 border-gray-300 hover:bg-gray-50",onClick:()=>m?.(e.id),children:[r.jsx(k.Z,{className:"h-3 w-3 mr-1"}),"Schedule"]})]})]})]}),r.jsx(f,{isOpen:D,onClose:()=>_(!1),child:e,onChildUpdated:()=>{u?.(),_(!1)},onChildDeleted:()=>{b?.(),_(!1)}})]})}},16171:(e,s,t)=>{t.d(s,{Z:()=>i});var r=t(10326),a=t(17577),l=t(47092);function i({isOpen:e,onClose:s,childId:t,childName:i,onLessonScheduled:d}){let[n,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)({subject:"",tutor_id:"",scheduled_time:"",duration_minutes:60}),u=[{id:"1",name:"Ms. Chen",subjects:["Mathematics","Physics"]},{id:"2",name:"Dr. Smith",subjects:["Science","Chemistry"]},{id:"3",name:"Mr. Davis",subjects:["English","History"]},{id:"4",name:"Ms. Johnson",subjects:["Mathematics","Statistics"]}].filter(e=>e.subjects.includes(c.subject)),x=async e=>{e.preventDefault(),o(!0);try{await l.U.scheduleLesson({student_id:t,subject:c.subject,tutor_id:c.tutor_id,scheduled_time:c.scheduled_time,duration_minutes:c.duration_minutes}),d(),s(),m({subject:"",tutor_id:"",scheduled_time:"",duration_minutes:60})}catch(e){console.error("Error scheduling lesson:",e),alert("Failed to schedule lesson. Please try again.")}finally{o(!1)}},h=e=>{let{name:s,value:t}=e.target;m(e=>({...e,[s]:t}))};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["\uD83D\uDCC5 Schedule Lesson for ",i]}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject \uD83D\uDCDA"}),(0,r.jsxs)("select",{name:"subject",value:c.subject,onChange:h,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select a subject"}),["Mathematics","Science","English","History","Physics","Chemistry","Art","Music"].map(e=>r.jsx("option",{value:e,children:e},e))]})]}),c.subject&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Tutors \uD83D\uDC68‍\uD83C\uDFEB"}),(0,r.jsxs)("select",{name:"tutor_id",value:c.tutor_id,onChange:h,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select a tutor"}),u.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (specializes in ",e.subjects.join(", "),")"]},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time \uD83D\uDD50"}),r.jsx("input",{type:"datetime-local",name:"scheduled_time",value:c.scheduled_time,onChange:h,required:!0,min:new Date().toISOString().slice(0,16),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration ⏱️"}),(0,r.jsxs)("select",{name:"duration_minutes",value:c.duration_minutes,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:30,children:"30 minutes"}),r.jsx("option",{value:45,children:"45 minutes"}),r.jsx("option",{value:60,children:"60 minutes"}),r.jsx("option",{value:90,children:"90 minutes"}),r.jsx("option",{value:120,children:"120 minutes"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Scheduling...":"Schedule Lesson \uD83D\uDE80"})]})]})]})}):null}},47208:(e,s,t)=>{t.d(s,{Z:()=>m});var r=t(10326),a=t(17577),l=t(2777),i=t(3594),d=t(91664),n=t(51896),o=t(63685),c=t(94019);function m({currentAvatar:e,userId:s,name:t,onAvatarChange:m,size:u="md",className:x="",showUploadButton:h=!0,editable:b=!0}){let[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(e||null),j=(0,a.useRef)(null),v=async t=>{if(!t.target.files||!t.target.files[0])return;let r=t.target.files[0];if(!r.type.startsWith("image/")){alert("Please select an image file");return}if(r.size>5242880){alert("Image size must be less than 5MB");return}try{p(!0);let e=new FileReader;e.onload=e=>{let t=e.target?.result;if(y(t),!s||"temp"===s||s.startsWith("temp-")){m(t),p(!1);return}N(r,t)},e.readAsDataURL(r)}catch(s){console.error("Error processing avatar:",s),alert("Failed to process image. Please try again."),y(e||null)}finally{p(!1)}},N=async(t,r)=>{if(!s||"temp"===s||s.startsWith("temp-")){r&&m(r);return}try{let{data:a,error:i}=await l.supabase.storage.getBucket("avatars");if(i||!a){console.log("Avatars bucket does not exist, using fallback"),r&&m(r);return}let d=t.name.split(".").pop(),n=`${s}/${Date.now()}.${d}`;console.log("Uploading file:",n,"for user:",s);let{data:o,error:c}=await l.supabase.storage.from("avatars").upload(n,t,{cacheControl:"3600",upsert:!0});if(c){console.error("Upload error:",c),console.log("Falling back to data URL due to upload error:",c.message),r?m(r):(alert(`Failed to upload image: ${c.message}`),y(e||null));return}let{data:{publicUrl:u}}=l.supabase.storage.from("avatars").getPublicUrl(n);console.log("Upload successful, public URL:",u),m(u)}catch(s){console.error("Error uploading avatar:",s),console.log("Falling back to data URL due to general error:",s.message),r?m(r):(alert("Failed to upload image. Using local preview instead."),y(e||null))}};return(0,r.jsxs)("div",{className:`flex flex-col items-center ${x}`,children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)(i.qE,{className:`${(()=>{switch(u){case"sm":return"h-8 w-8";case"md":default:return"h-12 w-12";case"lg":return"h-16 w-16";case"xl":return"h-24 w-24"}})()} border-4 border-white shadow-lg transition-all duration-300 group-hover:shadow-xl`,children:[r.jsx(i.F$,{src:f||void 0,alt:`${t||"User"}'s profile`,className:"object-cover"}),r.jsx(i.Q5,{className:`bg-gradient-to-br ${(()=>{let e=["from-blue-400 to-purple-600","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],s=(t&&"string"==typeof t?t:"User").split("").reduce((e,s)=>e+s.charCodeAt(0),0)%e.length;return e[s]})()} text-white font-semibold`,children:t&&"string"==typeof t&&""!==t.trim()?t.trim().split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"U"})]}),b&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer",onClick:()=>j.current?.click(),children:r.jsx(n.Z,{className:"h-6 w-6 text-white"})}),g&&r.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),r.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:!b||g}),h&&b&&(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>j.current?.click(),disabled:g,className:"text-xs",children:[r.jsx(o.Z,{className:"h-3 w-3 mr-1"}),f?"Change":"Upload"]}),f&&(0,r.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:()=>{y(null),m(null),j.current&&(j.current.value="")},disabled:g,className:"text-xs text-red-600 hover:text-red-700",children:[r.jsx(c.Z,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),g&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}},38443:(e,s,t)=>{t.d(s,{C:()=>d});var r=t(10326);t(17577);var a=t(79360),l=t(51223);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,...t}){return r.jsx("div",{className:(0,l.cn)(i({variant:s}),e),...t})}},91664:(e,s,t)=>{t.d(s,{z:()=>o});var r=t(10326),a=t(17577),l=t(86438),i=t(79360),d=t(51223);let n=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...i},o)=>{let c=a?l.g7:"button";return r.jsx(c,{className:(0,d.cn)(n({variant:s,size:t,className:e})),ref:o,...i})});o.displayName="Button"},29752:(e,s,t)=>{t.d(s,{Ol:()=>d,Zb:()=>i,aY:()=>o,ll:()=>n});var r=t(10326),a=t(17577),l=t(51223);let i=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let d=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let n=a.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle",a.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},33269:(e,s,t)=>{t.d(s,{E:()=>d});var r=t(10326),a=t(17577),l=t(87273),i=t(51223);let d=a.forwardRef(({className:e,value:s,...t},a)=>r.jsx(l.fC,{ref:a,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:r.jsx(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));d.displayName=l.fC.displayName}};